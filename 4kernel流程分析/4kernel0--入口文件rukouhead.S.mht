From: WizMime<support@wiz.cn>
Subject: =?gb2312?B?NGtlcm5lbDAtLcjrv9rOxLz+cnVrb3VoZWFkLlM=?=
Date: Date: Mon, 23 Oct 2017 08:43:34 +0800
MIME-Version: 1.0
Content-Type: multipart/related;
	type="multipart/alternative";
	boundary="----=_Next_Part_0415483779.729"

This is a multi-part message in MIME format.

------=_Next_Part_0415483779.729
Content-Type: multipart/alternative;
	boundary="----=_Next_Part_0138494593.370"


------=_Next_Part_0138494593.370
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable

This is a multi-part message in MIME format.

------=_Next_Part_0138494593.370
Content-Type: text/html;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML><html><head>=0D=0A<meta http-equiv=3D"Content-Type=
" content=3D"text/html; charset=3Dgb2312">=0A=0A<title>4kernel0--=
=C8=EB=BF=DA=CE=C4=BC=FErukouhead.S</title>=0A    <!--mark |wiz_c=
ustom_css| for wizeditor replace it-->=0A<style id=3D"wiz_custom_=
css">html, body {            font-size: 15px;        }        bod=
y {            font-family: Helvetica, 'Hiragino Sans GB', '=CE=A2=
=C8=ED=D1=C5=BA=DA', 'Microsoft YaHei UI', SimSun, SimHei, arial,=
 sans-serif;            line-height: 1.6;            margin: 0; =20=
          padding: 20px 15px;            padding: 1.33rem 1rem; =20=
      }        h1, h2, h3, h4, h5, h6 {            margin: 20px 0=
 10px;            margin: 1.33rem 0 0.667rem;            padding:=
 0;            font-weight: bold;        }        h1 {          =20=
 font-size: 21px;            font-size: 1.4rem;        }        h=
2 {            font-size: 20px;            font-size: 1.33rem;  =20=
     }        h3 {            font-size: 18px;            font-si=
ze: 1.2rem;        }        h4 {            font-size: 17px;    =20=
       font-size: 1.13rem;        }        h5 {            font-s=
ize: 15px;            font-size: 1rem;        }        h6 {     =20=
      font-size: 15px;            font-size: 1rem;            col=
or: #777777;            margin: 1rem 0;        }        div, p, u=
l, ol, dl, li {            margin: 0;        }        blockquote,=
 table, pre, code {            margin: 8px 0;        }        ul,=
 ol {            padding-left: 32px;            padding-left: 2.1=
3rem;        }        blockquote {            padding: 0 12px;  =20=
         padding: 0 0.8rem;        }        blockquote > :first-c=
hild {            margin-top: 0;        }        blockquote > :la=
st-child {            margin-bottom: 0;        }        img {   =20=
        border: 0;            max-width: 100%;            height:=
 auto !important;            margin: 2px 0;        }        table=
 {            border-collapse: collapse;            border: 1px s=
olid #bbbbbb;        }        td, th {            padding: 4px 8p=
x;            border-collapse: collapse;            border: 1px s=
olid #bbbbbb;			        }        @media only screen and (-webkit-=
max-device-width: 1024px), only screen and (-o-max-device-width:=20=
1024px), only screen and (max-device-width: 1024px), only screen=20=
and (-webkit-min-device-pixel-ratio: 3), only screen and (-o-min-=
device-pixel-ratio: 3), only screen and (min-device-pixel-ratio:=20=
3) {            html, body {                font-size: 17px;    =20=
       }            body {                line-height: 1.7;     =20=
          padding: 0.75rem 0.9375rem;                color: #353c=
47;            }            h1 {                font-size: 2.125r=
em;            }            h2 {                font-size: 1.875r=
em;            }            h3 {                font-size: 1.625r=
em;            }            h4 {                font-size: 1.375r=
em;            }            h5 {                font-size: 1.125r=
em;            }            h6 {                color: inherit; =20=
          }            ul, ol {                padding-left: 2.5r=
em;            }            blockquote {                padding:=20=
0 0.9375rem;            }        }</style></head>=0A=0A<body spel=
lcheck=3D"false" ><div><div><b><span data-wiz-span=3D"data-wiz-sp=
an" style=3D"color: rgb(255, 0, 0); font-size: 0.867rem;">kernel-=
4.4/arch/arm64/kernel/head.S</span></b><br></div><div><span data-=
wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">/*</spa=
n></div><div><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">&nbsp;* Low-level CPU initialisation</span></div=
><div><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">&nbsp;* Based on arch/arm/kernel/head.S</span></div><di=
v><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">&nbsp;*</span></div><div><span data-wiz-span=3D"data-wiz-sp=
an" style=3D"font-size: 0.867rem;">&nbsp;* Copyright (C) 1994-200=
2 Russell King</span></div><div><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">&nbsp;* Copyright (C) 2003-20=
12 ARM Ltd.</span></div><div><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;">&nbsp;* Authors:</span><span cla=
ss=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-sp=
an=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></spa=
n><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">Catalin Marinas &lt;catalin.marinas@arm.com&gt;</span></div=
><div><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">&nbsp;*</span><span class=3D"Apple-tab-span" style=3D"w=
hite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">		</span></span><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">Will Deacon &lt;will.deac=
on@arm.com&gt;</span></div><div><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">&nbsp;*</span></div><div><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
&nbsp;* This program is free software; you can redistribute it an=
d/or modify</span></div><div><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;">&nbsp;* it under the terms of th=
e GNU General Public License version 2 as</span></div><div><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">&n=
bsp;* published by the Free Software Foundation.</span></div><div=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">&nbsp;*</span></div><div><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;">&nbsp;* This program is distrib=
uted in the hope that it will be useful,</span></div><div><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">&nb=
sp;* but WITHOUT ANY WARRANTY; without even the implied warranty=20=
of</span></div><div><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">&nbsp;* MERCHANTABILITY or FITNESS FOR A P=
ARTICULAR PURPOSE. &nbsp;See the</span></div><div><span data-wiz-=
span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">&nbsp;* GNU=
 General Public License for more details.</span></div><div><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">&n=
bsp;*</span></div><div><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">&nbsp;* You should have received a cop=
y of the GNU General Public License</span></div><div><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">&nbsp;*=20=
along with this program. &nbsp;If not, see &lt;http://www.gnu.org=
/licenses/&gt;.</span></div><div><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">&nbsp;*/</span></div><div><b=
r></div><div><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">#include &lt;linux/linkage.h&gt;</span></div><di=
v><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">#include &lt;linux/init.h&gt;</span></div><div><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">#include=
 &lt;linux/irqchip/arm-gic-v3.h&gt;</span></div><div><br></div><d=
iv><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">#include &lt;asm/assembler.h&gt;</span></div><div><span da=
ta-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">#inc=
lude &lt;asm/boot.h&gt;</span></div><div><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">#include &lt;asm/ptr=
ace.h&gt;</span></div><div><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">#include &lt;asm/asm-offsets.h&gt;=
</span></div><div><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">#include &lt;asm/cache.h&gt;</span></div><d=
iv><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">#include &lt;asm/cputype.h&gt;</span></div><div><span data=
-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">#inclu=
de &lt;asm/elf.h&gt;</span></div><div><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">#include &lt;asm/kernel=
-pgtable.h&gt;</span></div><div><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">#include &lt;asm/memory.h&gt;=
</span></div><div><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">#include &lt;asm/pgtable-hwdef.h&gt;</span>=
</div><div><span data-wiz-span=3D"data-wiz-span" style=3D"font-si=
ze: 0.867rem;">#include &lt;asm/pgtable.h&gt;</span></div><div><s=
pan data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;=
">#include &lt;asm/page.h&gt;</span></div><div><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">#include &lt;a=
sm/sysreg.h&gt;</span></div><div><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">#include &lt;asm/thread_info=
.h&gt;</span></div><div><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">#include &lt;asm/virt.h&gt;</span></d=
iv><div><br></div><div><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">#define __PHYS_OFFSET</span><span clas=
s=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">(KERNEL_START - TEXT_OFFSET)</span></div><div><br></div><div=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">#if (TEXT_OFFSET &amp; 0xfff) !=3D 0</span></div><div><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">#e=
rror TEXT_OFFSET must be at least 4KB aligned</span></div><div><s=
pan data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;=
">#elif (PAGE_OFFSET &amp; 0x1fffff) !=3D 0</span></div><div><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
#error PAGE_OFFSET must be at least 2MB aligned</span></div><div>=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">#elif TEXT_OFFSET &gt; 0x1fffff</span></div><div><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">#error T=
EXT_OFFSET must be less than 2MB</span></div><div><span data-wiz-=
span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">#endif</spa=
n></div><div><br></div><div><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">#define KERNEL_START</span><span=20=
class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></=
span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">_text</span></div><div><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">#define KERNEL_END</span><spa=
n class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span>=
</span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">_end</span></div><div><br></div><div><span data-wiz-sp=
an=3D"data-wiz-span" style=3D"font-size: 0.867rem;">/*</span></di=
v><div><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">&nbsp;* Kernel startup entry point.</span></div><div><=
span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem=
;">&nbsp;* ---------------------------</span></div><div><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">&nbsp=
;*</span></div><div><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">&nbsp;* The requirements are:</span></div>=
<div><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">&nbsp;* &nbsp; MMU =3D off, D-cache =3D off, I-cache =3D=
 on or off,</span></div><div><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;">&nbsp;* &nbsp; x0 =3D physical a=
ddress to the FDT blob.</span></div><div><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">&nbsp;*</span></div>=
<div><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">&nbsp;* This code is mostly position independent so you=20=
call this at</span></div><div><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;">&nbsp;* __pa(PAGE_OFFSET + TEXT=
_OFFSET).</span></div><div><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">&nbsp;*</span></div><div><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">&nbsp=
;* Note that the callee-saved registers are used for storing vari=
ables</span></div><div><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">&nbsp;* that are useful before the MMU=
 is enabled. The allocations are described</span></div><div><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">&=
nbsp;* in the entry routines.</span></div><div><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">&nbsp;*/</span=
></div><div><span class=3D"Apple-tab-span" style=3D"white-space:p=
re"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.8=
67rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">__HEAD</span></div><div><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">_head:</sp=
an></div><div><span class=3D"Apple-tab-span" style=3D"white-space=
:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">/*</span></div><div><span class=3D"A=
pple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=20=
* DO NOT MODIFY. Image header expected by Linux boot-loaders.</sp=
an></div><div><span class=3D"Apple-tab-span" style=3D"white-space=
:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;"> */</span></div><div><span data-wiz-=
span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">#ifdef CONF=
IG_EFI</span></div><div><span class=3D"Apple-tab-span" style=3D"w=
hite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">/*</span></div><div><span=20=
class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></=
span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;"> * This add instruction has no meaningful effect except=20=
that</span></div><div><span class=3D"Apple-tab-span" style=3D"whi=
te-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;"> * its opcode forms the magi=
c "MZ" signature required by UEFI.</span></div><div><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
> */</span></div><div><span class=3D"Apple-tab-span" style=3D"whi=
te-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">add</span><span class=3D"App=
le-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"dat=
a-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">x13=
, x18, #0x16</span></div><div><span class=3D"Apple-tab-span" styl=
e=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">b</span><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>stext</span></div><div><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">#else</span></div><div><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>b</span><span class=3D"Apple-tab-span" style=3D"white-space:pre"=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">stext</span><span class=3D"Apple-tab-span"=
 style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">				</span></span><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// branch to=
 kernel start, magic</span></div><div><span class=3D"Apple-tab-sp=
an" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">.long</span>=
<span class=3D"Apple-tab-span" style=3D"white-space:pre"><span da=
ta-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</s=
pan></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-si=
ze: 0.867rem;">0</span><span class=3D"Apple-tab-span" style=3D"wh=
ite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fon=
t-size: 0.867rem;">				</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">// reserved</span></div>=
<div><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">#endif</span></div><div><span class=3D"Apple-tab-span" s=
tyle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">le64sym</span><spa=
n class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span>=
</span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">_kernel_offset_le</span><span class=3D"Apple-tab-span"=
 style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">		</span></span><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// Image load=20=
offset from start of RAM, little-endian</span></div><div><span cl=
ass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></sp=
an><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">le64sym</span><span class=3D"Apple-tab-span" style=3D"whit=
e-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">_kernel_size_le</span><span c=
lass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-=
span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">			</span><=
/span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">// Effective size of kernel image, little-endian</span>=
</div><div><span class=3D"Apple-tab-span" style=3D"white-space:pr=
e"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">le64sym</span><span class=3D"Apple-tab-=
span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">_kernel_fl=
ags_le</span><span class=3D"Apple-tab-span" style=3D"white-space:=
pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">		</span></span><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">// Informative flags, little-endian<=
/span></div><div><span class=3D"Apple-tab-span" style=3D"white-sp=
ace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size=
: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">.quad</span><span class=3D"Apple-=
tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">	</span></span><span data=
-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">0</spa=
n><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	=09=
		</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">// reserved</span></div><div><span class=3D"A=
pple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">.=
quad</span><span class=3D"Apple-tab-span" style=3D"white-space:pr=
e"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">0</span><span class=3D"Apple-tab-span"=20=
style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">				</span></span><span data-wiz-sp=
an=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// reserved</=
span></div><div><span class=3D"Apple-tab-span" style=3D"white-spa=
ce:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=
 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">.quad</span><span class=3D"Apple-t=
ab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">	</span></span><span data-=
wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">0</span=
><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">		=09=
	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"fon=
t-size: 0.867rem;">// reserved</span></div><div><span class=3D"Ap=
ple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"da=
ta-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">.b=
yte</span><span class=3D"Apple-tab-span" style=3D"white-space:pre=
"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">0x41</span><span class=3D"Apple-tab-span"=20=
style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">				</span></span><span data-wiz-sp=
an=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// Magic numb=
er, "ARM\x64"</span></div><div><span class=3D"Apple-tab-span" sty=
le=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">.byte</span><span c=
lass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-=
span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></s=
pan><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.8=
67rem;">0x52</span></div><div><span class=3D"Apple-tab-span" styl=
e=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">.byte</span><span cl=
ass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></sp=
an><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">0x4d</span></div><div><span class=3D"Apple-tab-span" style=
=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">.byte</span><span class=
=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span>=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">0x64</span></div><div><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">#ifdef CONFIG_EFI</span></div><div>=
<span class=3D"Apple-tab-span" style=3D"white-space:pre"><span da=
ta-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</s=
pan></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-si=
ze: 0.867rem;">.long</span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">pe_header - _head</span>=
<span class=3D"Apple-tab-span" style=3D"white-space:pre"><span da=
ta-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">		</=
span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">// Offset to the PE header.</span></div><div><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
#else</span></div><div><span class=3D"Apple-tab-span" style=3D"wh=
ite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fon=
t-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz=
-span" style=3D"font-size: 0.867rem;">.word</span><span class=3D"=
Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
0</span><span class=3D"Apple-tab-span" style=3D"white-space:pre">=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">				</span></span><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">// reserved</span></div><div><span data=
-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">#endif=
</span></div><div><br></div><div><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">#ifdef CONFIG_EFI</span></di=
v><div><span class=3D"Apple-tab-span" style=3D"white-space:pre"><=
span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem=
;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">.globl</span><span class=3D"Apple-tab-span"=
 style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">__efistub_stext=
_offset</span></div><div><span class=3D"Apple-tab-span" style=3D"=
white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"f=
ont-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">.set</span><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>__efistub_stext_offset, stext - _head</span></div><div><span cla=
ss=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-sp=
an=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></spa=
n><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">.align 3</span></div><div><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">pe_header:</span></div><div><=
span class=3D"Apple-tab-span" style=3D"white-space:pre"><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</sp=
an></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">.ascii</span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">"PE"</span></div><div><s=
pan class=3D"Apple-tab-span" style=3D"white-space:pre"><span data=
-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</spa=
n></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size=
: 0.867rem;">.short </span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">0</span></div><div><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">c=
off_header:</span></div><div><span class=3D"Apple-tab-span" style=
=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">.short</span><span clas=
s=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">0xaa64</span><span class=3D"Apple-tab-span" style=3D"white-s=
pace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">				</span></span><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">// AArch64</span></div><div><=
span class=3D"Apple-tab-span" style=3D"white-space:pre"><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</sp=
an></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">.short</span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">2</span><span class=3D"A=
pple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">				</span></span><s=
pan data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;=
">// nr_sections</span></div><div><span class=3D"Apple-tab-span"=20=
style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">.long</span><span=20=
class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></=
span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">0 </span><span class=3D"Apple-tab-span" style=3D"white-s=
pace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">				</span></span><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">// TimeDateStamp</span></div>=
<div><span class=3D"Apple-tab-span" style=3D"white-space:pre"><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">.long</span><span class=3D"Apple-tab-span" st=
yle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">0</span><span clas=
s=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">				</span></s=
pan><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.8=
67rem;">// PointerToSymbolTable</span></div><div><span class=3D"A=
pple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">.=
long</span><span class=3D"Apple-tab-span" style=3D"white-space:pr=
e"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">1</span><span class=3D"Apple-tab-span"=20=
style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">				</span></span><span data-wiz-sp=
an=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// NumberOfSy=
mbols</span></div><div><span class=3D"Apple-tab-span" style=3D"wh=
ite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fon=
t-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz=
-span" style=3D"font-size: 0.867rem;">.short</span><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>section_table - optional_header</span><span class=3D"Apple-tab-s=
pan" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-sp=
an" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-=
span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// SizeOfOp=
tionalHeader</span></div><div><span class=3D"Apple-tab-span" styl=
e=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">.short</span><span c=
lass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-=
span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></s=
pan><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.8=
67rem;">0x206</span><span class=3D"Apple-tab-span" style=3D"white=
-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">				</span></span><span data-wiz-span=3D"data-wiz=
-span" style=3D"font-size: 0.867rem;">// Characteristics.</span><=
/div><div><span class=3D"Apple-tab-span" style=3D"white-space:pre=
"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">						</span></span><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">// IMAGE_FILE_DEBUG_STRIPPED |</spa=
n></div><div><span class=3D"Apple-tab-span" style=3D"white-space:=
pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">						</span></span><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;">// IMAGE_FILE_EXECUTABLE_IMAGE |=
</span></div><div><span class=3D"Apple-tab-span" style=3D"white-s=
pace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">						</span></span><span data-wiz-span=3D"data-wiz=
-span" style=3D"font-size: 0.867rem;">// IMAGE_FILE_LINE_NUMS_STR=
IPPED</span></div><div><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">optional_header:</span></div><div><spa=
n class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span>=
</span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">.short</span><span class=3D"Apple-tab-span" style=3D"w=
hite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">0x20b</span><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">				</span></span>=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">// PE32+ format</span></div><div><span class=3D"Apple-tab-spa=
n" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-sp=
an=3D"data-wiz-span" style=3D"font-size: 0.867rem;">.byte</span><=
span class=3D"Apple-tab-span" style=3D"white-space:pre"><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</sp=
an></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">0x02</span><span class=3D"Apple-tab-span" style=3D"=
white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"f=
ont-size: 0.867rem;">				</span></span><span data-wiz-span=3D"dat=
a-wiz-span" style=3D"font-size: 0.867rem;">// MajorLinkerVersion<=
/span></div><div><span class=3D"Apple-tab-span" style=3D"white-sp=
ace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size=
: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">.byte</span><span class=3D"Apple-=
tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">	</span></span><span data=
-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">0x14</=
span><span class=3D"Apple-tab-span" style=3D"white-space:pre"><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>				</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">// MinorLinkerVersion</span></div><div><sp=
an class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-=
wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span=
></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=
 0.867rem;">.long</span><span class=3D"Apple-tab-span" style=3D"w=
hite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">_end - stext</span><span c=
lass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-=
span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">			</span><=
/span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">// SizeOfCode</span></div><div><span class=3D"Apple-tab=
-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">	</span></span><span data-wi=
z-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">.long</sp=
an><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=09=
</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">0</span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">				</span></span><span data-wiz-span=3D"da=
ta-wiz-span" style=3D"font-size: 0.867rem;">// SizeOfInitializedD=
ata</span></div><div><span class=3D"Apple-tab-span" style=3D"whit=
e-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">.long</span><span class=3D"Ap=
ple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"da=
ta-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">0<=
/span><span class=3D"Apple-tab-span" style=3D"white-space:pre"><s=
pan data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;=
">				</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">// SizeOfUninitializedData</span></div><di=
v><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	<=
/span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">.long</span><span class=3D"Apple-tab-span" style=
=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">__efistub_entry - _head=
</span><span class=3D"Apple-tab-span" style=3D"white-space:pre"><=
span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem=
;">		</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">// AddressOfEntryPoint</span></div><div><s=
pan class=3D"Apple-tab-span" style=3D"white-space:pre"><span data=
-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</spa=
n></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size=
: 0.867rem;">.long</span><span class=3D"Apple-tab-span" style=3D"=
white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"f=
ont-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">__efistub_stext_offset</s=
pan><span class=3D"Apple-tab-span" style=3D"white-space:pre"><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
		</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">// BaseOfCode</span></div><div><br></div><div=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">extra_header_fields:</span></div><div><span class=3D"Apple-t=
ab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">	</span></span><span data-=
wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">.quad</=
span><span class=3D"Apple-tab-span" style=3D"white-space:pre"><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">0</span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">				</span></span><span data-wiz-span=3D"da=
ta-wiz-span" style=3D"font-size: 0.867rem;">// ImageBase</span></=
div><div><span class=3D"Apple-tab-span" style=3D"white-space:pre"=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">.long</span><span class=3D"Apple-tab-span"=
 style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">0x1000</span><s=
pan class=3D"Apple-tab-span" style=3D"white-space:pre"><span data=
-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">				</=
span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">// SectionAlignment</span></div><div><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>.long</span><span class=3D"Apple-tab-span" style=3D"white-space:=
pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">PECOFF_FILE_ALIGNMENT</span><span cla=
ss=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-sp=
an=3D"data-wiz-span" style=3D"font-size: 0.867rem;">		</span></sp=
an><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">// FileAlignment</span></div><div><span class=3D"Apple-tab=
-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">	</span></span><span data-wi=
z-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">.short</s=
pan><span class=3D"Apple-tab-span" style=3D"white-space:pre"><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"fon=
t-size: 0.867rem;">0</span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">				</span></span><span data-wiz-span=3D"da=
ta-wiz-span" style=3D"font-size: 0.867rem;">// MajorOperatingSyst=
emVersion</span></div><div><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">.short</span><span class=
=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span>=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">0</span><span class=3D"Apple-tab-span" style=3D"white-space:p=
re"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.8=
67rem;">				</span></span><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">// MinorOperatingSystemVersion</spa=
n></div><div><span class=3D"Apple-tab-span" style=3D"white-space:=
pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">.short</span><span class=3D"Apple-tab=
-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">	</span></span><span data-wi=
z-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">0</span><=
span class=3D"Apple-tab-span" style=3D"white-space:pre"><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">				<=
/span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">// MajorImageVersion</span></div><div><span clas=
s=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">.short</span><span class=3D"Apple-tab-span" style=3D"white-s=
pace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;">0</span><span class=3D"Apple-tab=
-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">				</span></span><span data=
-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// Min=
orImageVersion</span></div><div><span class=3D"Apple-tab-span" st=
yle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">.short</span><span=
 class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wi=
z-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span><=
/span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">0</span><span class=3D"Apple-tab-span" style=3D"white-s=
pace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">				</span></span><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">// MajorSubsystemVersion</spa=
n></div><div><span class=3D"Apple-tab-span" style=3D"white-space:=
pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">.short</span><span class=3D"Apple-tab=
-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">	</span></span><span data-wi=
z-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">0</span><=
span class=3D"Apple-tab-span" style=3D"white-space:pre"><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">				<=
/span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">// MinorSubsystemVersion</span></div><div><span=20=
class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></=
span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">.long</span><span class=3D"Apple-tab-span" style=3D"whit=
e-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">0</span><span class=3D"Apple-=
tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">				</span></span><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">//=20=
Win32VersionValue</span></div><div><br></div><div><span class=3D"=
Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
.long</span><span class=3D"Apple-tab-span" style=3D"white-space:p=
re"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.8=
67rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">_end - _head</span><span class=3D"Appl=
e-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">			</span></span><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">//=
 SizeOfImage</span></div><div><br></div><div><span class=3D"Apple=
-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// Ev=
erything before the kernel image is considered part of the header=
</span></div><div><span class=3D"Apple-tab-span" style=3D"white-s=
pace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;">.long</span><span class=3D"Apple=
-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">__efi=
stub_stext_offset</span><span class=3D"Apple-tab-span" style=3D"w=
hite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">		</span></span><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">// SizeOfHeaders</span></=
div><div><span class=3D"Apple-tab-span" style=3D"white-space:pre"=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">.long</span><span class=3D"Apple-tab-span"=
 style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">0</span><span c=
lass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-=
span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">				</span>=
</span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">// CheckSum</span></div><div><span class=3D"Apple-tab-=
span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">.short</sp=
an><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=09=
</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">0xa</span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">				</span></span><span data-wiz-span=3D"da=
ta-wiz-span" style=3D"font-size: 0.867rem;">// Subsystem (EFI app=
lication)</span></div><div><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">.short</span><span class=
=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span>=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">0</span><span class=3D"Apple-tab-span" style=3D"white-space:p=
re"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.8=
67rem;">				</span></span><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">// DllCharacteristics</span></div><=
div><span class=3D"Apple-tab-span" style=3D"white-space:pre"><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"fon=
t-size: 0.867rem;">.quad</span><span class=3D"Apple-tab-span" sty=
le=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">0</span><span class=
=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">				</span></sp=
an><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">// SizeOfStackReserve</span></div><div><span class=3D"Appl=
e-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span da=
ta-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">.qua=
d</span><span class=3D"Apple-tab-span" style=3D"white-space:pre">=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">0</span><span class=3D"Apple-tab-span" sty=
le=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">				</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">// SizeOfStackComm=
it</span></div><div><span class=3D"Apple-tab-span" style=3D"white=
-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-sp=
an" style=3D"font-size: 0.867rem;">.quad</span><span class=3D"App=
le-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"dat=
a-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">0</=
span><span class=3D"Apple-tab-span" style=3D"white-space:pre"><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>				</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">// SizeOfHeapReserve</span></div><div><spa=
n class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span>=
</span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">.quad</span><span class=3D"Apple-tab-span" style=3D"wh=
ite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fon=
t-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz=
-span" style=3D"font-size: 0.867rem;">0</span><span class=3D"Appl=
e-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">				</span></span><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">/=
/ SizeOfHeapCommit</span></div><div><span class=3D"Apple-tab-span=
" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">.long</span><s=
pan class=3D"Apple-tab-span" style=3D"white-space:pre"><span data=
-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</spa=
n></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size=
: 0.867rem;">0</span><span class=3D"Apple-tab-span" style=3D"whit=
e-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">				</span></span><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">// LoaderFlags</span></div=
><div><span class=3D"Apple-tab-span" style=3D"white-space:pre"><s=
pan data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;=
">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"f=
ont-size: 0.867rem;">.long</span><span class=3D"Apple-tab-span" s=
tyle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">0x6</span><span cl=
ass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">				</span><=
/span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">// NumberOfRvaAndSizes</span></div><div><br></div><div>=
<span class=3D"Apple-tab-span" style=3D"white-space:pre"><span da=
ta-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</s=
pan></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-si=
ze: 0.867rem;">.quad</span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">0</span><span class=3D"A=
pple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">				</span></span><s=
pan data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;=
">// ExportTable</span></div><div><span class=3D"Apple-tab-span"=20=
style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">.quad</span><span=20=
class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></=
span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">0</span><span class=3D"Apple-tab-span" style=3D"white-sp=
ace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size=
: 0.867rem;">				</span></span><span data-wiz-span=3D"data-wiz-sp=
an" style=3D"font-size: 0.867rem;">// ImportTable</span></div><di=
v><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	<=
/span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">.quad</span><span class=3D"Apple-tab-span" style=
=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">0</span><span class=3D"=
Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">				</span></span><=
span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem=
;">// ResourceTable</span></div><div><span class=3D"Apple-tab-spa=
n" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-sp=
an=3D"data-wiz-span" style=3D"font-size: 0.867rem;">.quad</span><=
span class=3D"Apple-tab-span" style=3D"white-space:pre"><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</sp=
an></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">0</span><span class=3D"Apple-tab-span" style=3D"whi=
te-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">				</span></span><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">// ExceptionTable</span><=
/div><div><span class=3D"Apple-tab-span" style=3D"white-space:pre=
"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">.quad</span><span class=3D"Apple-tab-span"=
 style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">0</span><span c=
lass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-=
span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">				</span>=
</span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">// CertificationTable</span></div><div><span class=3D"=
Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
.quad</span><span class=3D"Apple-tab-span" style=3D"white-space:p=
re"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.8=
67rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">0</span><span class=3D"Apple-tab-span"=
 style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">				</span></span><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// BaseReloc=
ationTable</span></div><div><br></div><div><span class=3D"Apple-t=
ab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">	</span></span><span data-=
wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// Sect=
ion table</span></div><div><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">section_table:</span></div><div><b=
r></div><div><span class=3D"Apple-tab-span" style=3D"white-space:=
pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">/*</span></div><div><span class=3D"Ap=
ple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"da=
ta-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"> *=
 The EFI application loader requires a relocation section</span><=
/div><div><span class=3D"Apple-tab-span" style=3D"white-space:pre=
"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;"> * because EFI applications must be reloca=
table. &nbsp;This is a</span></div><div><span class=3D"Apple-tab-=
span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"> * dummy s=
ection as far as we are concerned.</span></div><div><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
> */</span></div><div><span class=3D"Apple-tab-span" style=3D"whi=
te-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">.ascii</span><span class=3D"=
Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
".reloc"</span></div><div><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">.byte</span><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>0</span></div><div><span class=3D"Apple-tab-span" style=3D"white=
-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-sp=
an" style=3D"font-size: 0.867rem;">.byte</span><span class=3D"App=
le-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"dat=
a-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">0</=
span><span class=3D"Apple-tab-span" style=3D"white-space:pre"><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>			</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">// end of 0 padding of section name</span><=
/div><div><span class=3D"Apple-tab-span" style=3D"white-space:pre=
"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">.long</span><span class=3D"Apple-tab-span"=
 style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">0</span></div><=
div><span class=3D"Apple-tab-span" style=3D"white-space:pre"><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"fon=
t-size: 0.867rem;">.long</span><span class=3D"Apple-tab-span" sty=
le=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">0</span></div><div>=
<span class=3D"Apple-tab-span" style=3D"white-space:pre"><span da=
ta-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</s=
pan></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-si=
ze: 0.867rem;">.long</span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">0</span><span class=3D"A=
pple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">			</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>// SizeOfRawData</span></div><div><span class=3D"Apple-tab-span"=
 style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">.long</span><sp=
an class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-=
wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span=
></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=
 0.867rem;">0</span><span class=3D"Apple-tab-span" style=3D"white=
-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">			</span></span><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">// PointerToRawData</span></=
div><div><span class=3D"Apple-tab-span" style=3D"white-space:pre"=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">.long</span><span class=3D"Apple-tab-span"=
 style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">0</span><span c=
lass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-=
span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">			</span><=
/span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">// PointerToRelocations</span></div><div><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>.long</span><span class=3D"Apple-tab-span" style=3D"white-space:=
pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">0</span><span class=3D"Apple-tab-span=
" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">			</span></span><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// PointerTo=
LineNumbers</span></div><div><span class=3D"Apple-tab-span" style=
=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">.short</span><span clas=
s=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">0</span><span class=3D"Apple-tab-span" style=3D"white-space:=
pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">			</span></span><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">// NumberOfRelocations</span></div>=
<div><span class=3D"Apple-tab-span" style=3D"white-space:pre"><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">.short</span><span class=3D"Apple-tab-span" s=
tyle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">0</span><span clas=
s=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">			</span></sp=
an><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">// NumberOfLineNumbers</span></div><div><span class=3D"App=
le-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"dat=
a-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">.lo=
ng</span><span class=3D"Apple-tab-span" style=3D"white-space:pre"=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">0x42100040</span><span class=3D"Apple-tab-=
span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">		</span></span><span data-wi=
z-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// Charac=
teristics (section flags)</span></div><div><br></div><div><br></d=
iv><div><span class=3D"Apple-tab-span" style=3D"white-space:pre">=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">.ascii</span><span class=3D"Apple-tab-span=
" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">".text"</span>=
</div><div><span class=3D"Apple-tab-span" style=3D"white-space:pr=
e"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">.byte</span><span class=3D"Apple-tab-sp=
an" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">0</span></di=
v><div><span class=3D"Apple-tab-span" style=3D"white-space:pre"><=
span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem=
;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">.byte</span><span class=3D"Apple-tab-span"=20=
style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">0</span></div><div=
><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</=
span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">.byte</span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">0 &nbsp; &nbsp; &nbsp; &=
nbsp;</span><span class=3D"Apple-tab-span" style=3D"white-space:p=
re"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.8=
67rem;">		</span></span><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">// end of 0 padding of section name</=
span></div><div><span class=3D"Apple-tab-span" style=3D"white-spa=
ce:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=
 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">.long</span><span class=3D"Apple-t=
ab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">	</span></span><span data-=
wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">_end -=20=
stext</span><span class=3D"Apple-tab-span" style=3D"white-space:p=
re"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.8=
67rem;">		</span></span><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">// VirtualSize</span></div><div><span=
 class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wi=
z-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span><=
/span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">.long</span><span class=3D"Apple-tab-span" style=3D"whi=
te-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">__efistub_stext_offset</span=
><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</=
span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">// VirtualAddress</span></div><div><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>.long</span><span class=3D"Apple-tab-span" style=3D"white-space:=
pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">_edata - stext</span><span class=3D"A=
pple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">		</span></span><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
// SizeOfRawData</span></div><div><span class=3D"Apple-tab-span"=20=
style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">.long</span><span=20=
class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></=
span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">__efistub_stext_offset</span><span class=3D"Apple-tab-sp=
an" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// PointerTo=
RawData</span></div><div><br></div><div><span class=3D"Apple-tab-=
span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">.long</spa=
n><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	<=
/span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">0</span><span class=3D"Apple-tab-span" style=3D"=
white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"f=
ont-size: 0.867rem;">		</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">// PointerToRelocations=20=
(0 for executables)</span></div><div><span class=3D"Apple-tab-spa=
n" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-sp=
an=3D"data-wiz-span" style=3D"font-size: 0.867rem;">.long</span><=
span class=3D"Apple-tab-span" style=3D"white-space:pre"><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</sp=
an></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">0</span><span class=3D"Apple-tab-span" style=3D"whi=
te-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">		</span></span><span data-wiz-span=3D"data-wiz=
-span" style=3D"font-size: 0.867rem;">// PointerToLineNumbers (0=20=
for executables)</span></div><div><span class=3D"Apple-tab-span"=20=
style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">.short</span><span=
 class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wi=
z-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span><=
/span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">0</span><span class=3D"Apple-tab-span" style=3D"white-s=
pace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">		</span></span><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;">// NumberOfRelocations &nbsp;(0=
 for executables)</span></div><div><span class=3D"Apple-tab-span"=
 style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">.short</span><s=
pan class=3D"Apple-tab-span" style=3D"white-space:pre"><span data=
-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</spa=
n></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size=
: 0.867rem;">0</span><span class=3D"Apple-tab-span" style=3D"whit=
e-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">		</span></span><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">// NumberOfLineNumbers &nbsp=
;(0 for executables)</span></div><div><span class=3D"Apple-tab-sp=
an" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">.long</span>=
<span class=3D"Apple-tab-span" style=3D"white-space:pre"><span da=
ta-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</s=
pan></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-si=
ze: 0.867rem;">0xe0500020</span><span class=3D"Apple-tab-span" st=
yle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">// Characteristics=
 (section flags)</span></div><div><br></div><div><span class=3D"A=
pple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">/=
*</span></div><div><span class=3D"Apple-tab-span" style=3D"white-=
space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-si=
ze: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;"> * EFI will load stext onwards=20=
at the 4k section alignment</span></div><div><span class=3D"Apple=
-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"> * de=
scribed in the PE/COFF header. To ensure that instruction</span><=
/div><div><span class=3D"Apple-tab-span" style=3D"white-space:pre=
"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;"> * sequences using an adrp and a :lo12: im=
mediate will function</span></div><div><span class=3D"Apple-tab-s=
pan" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-sp=
an" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-=
span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"> * correctl=
y at this alignment, we must ensure that stext is</span></div><di=
v><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	<=
/span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;"> * placed at a 4k boundary in the Image to begin=
 with.</span></div><div><span class=3D"Apple-tab-span" style=3D"w=
hite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;"> */</span></div><div><span=
 class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wi=
z-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span><=
/span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">.align 12</span></div><div><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">#endif</span></div><div>=
<br></div><div><span data-wiz-span=3D"data-wiz-span" style=3D"fon=
t-size: 0.867rem;">ENTRY(stext)</span></div><div><span class=3D"A=
pple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">b=
l</span><span class=3D"Apple-tab-span" style=3D"white-space:pre">=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">preserve_boot_args</span></div><div><span=20=
class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></=
span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">bl</span><span class=3D"Apple-tab-span" style=3D"white-s=
pace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;">el2_setup</span><span class=3D"A=
pple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">			</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>// Drop to EL1, w20=3Dcpu_boot_mode</span></div><div><span class=
=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span>=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">adrp</span><span class=3D"Apple-tab-span" style=3D"white-spac=
e:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">x24, __PHYS_OFFSET</span></div><div=
><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</=
span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">and</span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">x23, x24, MIN_KIMG_ALIGN=
 - 1</span><span class=3D"Apple-tab-span" style=3D"white-space:pr=
e"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">// KASLR offset, defaults to 0</span></=
div><div><span class=3D"Apple-tab-span" style=3D"white-space:pre"=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">bl</span><span class=3D"Apple-tab-span" st=
yle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">set_cpu_boot_mode_=
flag</span></div><div><span class=3D"Apple-tab-span" style=3D"whi=
te-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">bl</span><span class=3D"Appl=
e-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span da=
ta-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">__cr=
eate_page_tables</span><span class=3D"Apple-tab-span" style=3D"wh=
ite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fon=
t-size: 0.867rem;">		</span></span><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">// x25=3DTTBR0, x26=3DTTBR=
1</span></div><div><span class=3D"Apple-tab-span" style=3D"white-=
space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-si=
ze: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;">/*</span></div><div><span class=
=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span>=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;"> * The following calls CPU setup code, see arch/arm64/mm/proc=
.S for</span></div><div><span class=3D"Apple-tab-span" style=3D"w=
hite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;"> * details.</span></div><d=
iv><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=09=
</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;"> * On return, the CPU will be ready for the MMU=
 to be turned on and</span></div><div><span class=3D"Apple-tab-sp=
an" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;"> * the TCR w=
ill have been set.</span></div><div><span class=3D"Apple-tab-span=
" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;"> */</span></di=
v><div><span class=3D"Apple-tab-span" style=3D"white-space:pre"><=
span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem=
;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">ldr</span><span class=3D"Apple-tab-span" st=
yle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">x27, 0f</span><spa=
n class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">				</sp=
an></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">// address to jump to after</span></div><div><span=20=
class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">						</sp=
an></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">// MMU has been enabled</span></div><div><span clas=
s=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">adr_l</span><span class=3D"Apple-tab-span" style=3D"white-sp=
ace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size=
: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">lr, __enable_mmu</span><span clas=
s=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">		</span></spa=
n><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">// return (PIC) address</span></div><div><span class=3D"App=
le-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"dat=
a-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">b</=
span><span class=3D"Apple-tab-span" style=3D"white-space:pre"><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">__cpu_setup</span><span class=3D"Apple-tab-sp=
an" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;">			</span></span><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// initial=
ise processor</span></div><div><span data-wiz-span=3D"data-wiz-sp=
an" style=3D"font-size: 0.867rem;">ENDPROC(stext)</span></div><di=
v><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	<=
/span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">.align</span><span class=3D"Apple-tab-span" styl=
e=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">3</span></div><div><=
span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem=
;">0:</span><span class=3D"Apple-tab-span" style=3D"white-space:p=
re"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.8=
67rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">.quad</span><span class=3D"Apple-tab-s=
pan" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-sp=
an" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-=
span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">__mmap_swit=
ched - (_head - TEXT_OFFSET) + KIMAGE_VADDR</span></div><div><br>=
</div><div><span data-wiz-span=3D"data-wiz-span" style=3D"font-si=
ze: 0.867rem;">/*</span></div><div><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">&nbsp;* Preserve the argum=
ents passed by the bootloader in x0 .. x3</span></div><div><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">&n=
bsp;*/</span></div><div><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">preserve_boot_args:</span></div><div>=
<span class=3D"Apple-tab-span" style=3D"white-space:pre"><span da=
ta-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</s=
pan></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-si=
ze: 0.867rem;">mov</span><span class=3D"Apple-tab-span" style=3D"=
white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"f=
ont-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">x21, x0</span><span class=
=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">				</span></sp=
an><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">// x21=3DFDT</span></div><div><br></div><div><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>adr_l</span><span class=3D"Apple-tab-span" style=3D"white-space:=
pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">x0, boot_args</span><span class=3D"Ap=
ple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"da=
ta-wiz-span" style=3D"font-size: 0.867rem;">			</span></span><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
// record the contents of</span></div><div><span class=3D"Apple-t=
ab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">	</span></span><span data-=
wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">stp</sp=
an><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=09=
</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">x21, x1, [x0]</span><span class=3D"Apple-tab-sp=
an" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;">			</span></span><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// x0 .. x=
3 at kernel entry</span></div><div><span class=3D"Apple-tab-span"=
 style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">stp</span><span=
 class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wi=
z-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span><=
/span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">x2, x3, [x0, #16]</span></div><div><br></div><div><span=
 class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wi=
z-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span><=
/span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">dmb</span><span class=3D"Apple-tab-span" style=3D"white=
-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-sp=
an" style=3D"font-size: 0.867rem;">sy</span><span class=3D"Apple-=
tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">				</span></span><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">//=20=
needed before dc ivac with</span></div><div><span class=3D"Apple-=
tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">						</span></span><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">/=
/ MMU off</span></div><div><br></div><div><span class=3D"Apple-ta=
b-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz=
-span" style=3D"font-size: 0.867rem;">	</span></span><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">add</spa=
n><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	<=
/span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">x1, x0, #0x20</span><span class=3D"Apple-tab-spa=
n" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;">			</span></span><span data-wiz-=
span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// 4 x 8 by=
tes</span></div><div><span class=3D"Apple-tab-span" style=3D"whit=
e-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">b</span><span class=3D"Apple-=
tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">	</span></span><span data=
-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">__inva=
l_cache_range</span><span class=3D"Apple-tab-span" style=3D"white=
-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">		</span></span><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">// tail call</span></div><div=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">ENDPROC(preserve_boot_args)</span></div><div><br></div><div>=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">/*</span></div><div><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">&nbsp;* Macro to create a table entry=
 to the next page.</span></div><div><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">&nbsp;*</span></div><div>=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">&nbsp;*</span><span class=3D"Apple-tab-span" style=3D"white-s=
pace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;">tbl:</span><span class=3D"Apple-=
tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">	</span></span><span data=
-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">page t=
able address</span></div><div><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;">&nbsp;*</span><span class=3D"Ap=
ple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"da=
ta-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">vi=
rt:</span><span class=3D"Apple-tab-span" style=3D"white-space:pre=
"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">virtual address</span></div><div><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">&nbsp=
;*</span><span class=3D"Apple-tab-span" style=3D"white-space:pre"=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">shift:</span><span class=3D"Apple-tab-span=
" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">#imm page tabl=
e shift</span></div><div><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">&nbsp;*</span><span class=3D"Apple-t=
ab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">	</span></span><span data-=
wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">ptrs:</=
span><span class=3D"Apple-tab-span" style=3D"white-space:pre"><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">#imm pointers per table page</span></div><div=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">&nbsp;*</span></div><div><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;">&nbsp;* Preserves:</span><span=20=
class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></=
span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">virt</span></div><div><span data-wiz-span=3D"data-wiz-sp=
an" style=3D"font-size: 0.867rem;">&nbsp;* Corrupts:</span><span=20=
class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></=
span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">tmp1, tmp2</span></div><div><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">&nbsp;* Returns:</span><=
span class=3D"Apple-tab-span" style=3D"white-space:pre"><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</sp=
an></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">tbl -&gt; next level table page address</span></div=
><div><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">&nbsp;*/</span></div><div><span class=3D"Apple-tab-span=
" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">.macro</span><=
span class=3D"Apple-tab-span" style=3D"white-space:pre"><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</sp=
an></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">create_table_entry, tbl, virt, shift, ptrs, tmp1, t=
mp2</span></div><div><span class=3D"Apple-tab-span" style=3D"whit=
e-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">lsr</span><span class=3D"Appl=
e-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span da=
ta-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">\tmp=
1, \virt, #\shift</span></div><div><span class=3D"Apple-tab-span"=
 style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">and</span><span=
 class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wi=
z-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span><=
/span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">\tmp1, \tmp1, #\ptrs - 1</span><span class=3D"Apple-tab=
-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">	</span></span><span data-wi=
z-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// table=20=
index</span></div><div><span class=3D"Apple-tab-span" style=3D"wh=
ite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fon=
t-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz=
-span" style=3D"font-size: 0.867rem;">add</span><span class=3D"Ap=
ple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"da=
ta-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">\t=
mp2, \tbl, #PAGE_SIZE</span></div><div><span class=3D"Apple-tab-s=
pan" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-sp=
an" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-=
span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">orr</span><=
span class=3D"Apple-tab-span" style=3D"white-space:pre"><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</sp=
an></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">\tmp2, \tmp2, #PMD_TYPE_TABLE</span><span class=3D"=
Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
// address of next table and entry type</span></div><div><span cl=
ass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></sp=
an><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">str</span><span class=3D"Apple-tab-span" style=3D"white-sp=
ace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size=
: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">\tmp2, [\tbl, \tmp1, lsl #3]</spa=
n></div><div><span class=3D"Apple-tab-span" style=3D"white-space:=
pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">add</span><span class=3D"Apple-tab-sp=
an" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">\tbl, \tbl,=20=
#PAGE_SIZE</span><span class=3D"Apple-tab-span" style=3D"white-sp=
ace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size=
: 0.867rem;">		</span></span><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;">// next level table page</span><=
/div><div><span class=3D"Apple-tab-span" style=3D"white-space:pre=
"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">.endm</span></div><div><br></div><div><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
/*</span></div><div><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">&nbsp;* Macro to populate the PGD (and pos=
sibily PUD) for the corresponding</span></div><div><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">&nbsp;* bl=
ock entry in the next level (tbl) for the given virtual address.<=
/span></div><div><span data-wiz-span=3D"data-wiz-span" style=3D"f=
ont-size: 0.867rem;">&nbsp;*</span></div><div><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">&nbsp;* Preserv=
es:</span><span class=3D"Apple-tab-span" style=3D"white-space:pre=
"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">tbl, next, virt</span></div><div><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">&nbsp=
;* Corrupts:</span><span class=3D"Apple-tab-span" style=3D"white-=
space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-si=
ze: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;">tmp1, tmp2</span></div><div><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>&nbsp;*/</span></div><div><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">.macro</span><span class=
=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span>=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">create_pgd_entry, tbl, virt, tmp1, tmp2</span></div><div><spa=
n class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span>=
</span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">create_table_entry \tbl, \virt, PGDIR_SHIFT, PTRS_PER_=
PGD, \tmp1, \tmp2</span></div><div><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">#if SWAPPER_PGTABLE_LEVELS=
 &gt; 3</span></div><div><span class=3D"Apple-tab-span" style=3D"=
white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"f=
ont-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">create_table_entry \tbl,=20=
\virt, PUD_SHIFT, PTRS_PER_PUD, \tmp1, \tmp2</span></div><div><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>#endif</span></div><div><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">#if SWAPPER_PGTABLE_LEVELS &gt; 2</s=
pan></div><div><span class=3D"Apple-tab-span" style=3D"white-spac=
e:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">create_table_entry \tbl, \virt, SWA=
PPER_TABLE_SHIFT, PTRS_PER_PTE, \tmp1, \tmp2</span></div><div><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>#endif</span></div><div><span class=3D"Apple-tab-span" style=3D"=
white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"f=
ont-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">.endm</span></div><div><b=
r></div><div><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">/*</span></div><div><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">&nbsp;* Macro to populat=
e block entries in the page table for the start..end</span></div>=
<div><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">&nbsp;* virtual range (inclusive).</span></div><div><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
&nbsp;*</span></div><div><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">&nbsp;* Preserves:</span><span class=
=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span>=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">tbl, flags</span></div><div><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">&nbsp;* Corrupts:</span><span=
 class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wi=
z-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span><=
/span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">phys, start, end, pstate</span></div><div><span data-wi=
z-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">&nbsp;*/<=
/span></div><div><span class=3D"Apple-tab-span" style=3D"white-sp=
ace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size=
: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">.macro</span><span class=3D"Apple=
-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">creat=
e_block_map, tbl, flags, phys, start, end</span></div><div><span=20=
class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></=
span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">lsr</span><span class=3D"Apple-tab-span" style=3D"white-=
space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-si=
ze: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;">\phys, \phys, #SWAPPER_BLOCK_SH=
IFT</span></div><div><span class=3D"Apple-tab-span" style=3D"whit=
e-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">lsr</span><span class=3D"Appl=
e-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span da=
ta-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">\sta=
rt, \start, #SWAPPER_BLOCK_SHIFT</span></div><div><span class=3D"=
Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
and</span><span class=3D"Apple-tab-span" style=3D"white-space:pre=
"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">\start, \start, #PTRS_PER_PTE - 1</span><s=
pan class=3D"Apple-tab-span" style=3D"white-space:pre"><span data=
-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</spa=
n></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size=
: 0.867rem;">// table index</span></div><div><span class=3D"Apple=
-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">orr</=
span><span class=3D"Apple-tab-span" style=3D"white-space:pre"><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">\phys, \flags, \phys, lsl #SWAPPER_BLOCK_SHIF=
T</span><span class=3D"Apple-tab-span" style=3D"white-space:pre">=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">// table entry</span></div><div><span clas=
s=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">lsr</span><span class=3D"Apple-tab-span" style=3D"white-spac=
e:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">\end, \end, #SWAPPER_BLOCK_SHIFT</s=
pan></div><div><span class=3D"Apple-tab-span" style=3D"white-spac=
e:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">and</span><span class=3D"Apple-tab-=
span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">\end, \end=
, #PTRS_PER_PTE - 1</span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">		</span></span><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">// table end index</spa=
n></div><div><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">9999:</span><span class=3D"Apple-tab-span" style=
=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">str</span><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>\phys, [\tbl, \start, lsl #3]</span><span class=3D"Apple-tab-spa=
n" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;">		</span></span><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// store the=
 entry</span></div><div><span class=3D"Apple-tab-span" style=3D"w=
hite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">add</span><span class=3D"A=
pple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">\=
start, \start, #1</span><span class=3D"Apple-tab-span" style=3D"w=
hite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">			</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">// next entry</span></di=
v><div><span class=3D"Apple-tab-span" style=3D"white-space:pre"><=
span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem=
;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">add</span><span class=3D"Apple-tab-span" st=
yle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">\phys, \phys, #SWA=
PPER_BLOCK_SIZE</span><span class=3D"Apple-tab-span" style=3D"whi=
te-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">		</span></span><span data-wiz-span=3D"data-wiz=
-span" style=3D"font-size: 0.867rem;">// next block</span></div><=
div><span class=3D"Apple-tab-span" style=3D"white-space:pre"><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"fon=
t-size: 0.867rem;">cmp</span><span class=3D"Apple-tab-span" style=
=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">\start, \end</span></di=
v><div><span class=3D"Apple-tab-span" style=3D"white-space:pre"><=
span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem=
;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">b.ls</span><span class=3D"Apple-tab-span" s=
tyle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">9999b</span></div>=
<div><span class=3D"Apple-tab-span" style=3D"white-space:pre"><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">.endm</span></div><div><br></div><div><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">/*<=
/span></div><div><span data-wiz-span=3D"data-wiz-span" style=3D"f=
ont-size: 0.867rem;">&nbsp;* Setup the initial page tables. We on=
ly setup the barest amount which is</span></div><div><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">&nbsp;*=20=
required to get the kernel running. The following sections are re=
quired:</span></div><div><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">&nbsp;* &nbsp; - identity mapping to=
 enable the MMU (low address, TTBR0)</span></div><div><span data-=
wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">&nbsp;*=
 &nbsp; - first few MB of the kernel linear mapping to jump to on=
ce the MMU has</span></div><div><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">&nbsp;* &nbsp; &nbsp; been en=
abled</span></div><div><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">&nbsp;*/</span></div><div><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">__create=
_page_tables:</span></div><div><span class=3D"Apple-tab-span" sty=
le=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">adrp</span><span cl=
ass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></sp=
an><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">x25, idmap_pg_dir</span></div><div><span class=3D"Apple-ta=
b-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz=
-span" style=3D"font-size: 0.867rem;">	</span></span><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">adrp</sp=
an><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=09=
</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">x26, swapper_pg_dir</span></div><div><span clas=
s=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">mov</span><span class=3D"Apple-tab-span" style=3D"white-spac=
e:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">x28, lr</span></div><div><br></div>=
<div><span class=3D"Apple-tab-span" style=3D"white-space:pre"><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">/*</span></div><div><span class=3D"Apple-tab-=
span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"> * Invalid=
ate the idmap and swapper page tables to avoid potential</span></=
div><div><span class=3D"Apple-tab-span" style=3D"white-space:pre"=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;"> * dirty cache lines being evicted.</span>=
</div><div><span class=3D"Apple-tab-span" style=3D"white-space:pr=
e"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;"> */</span></div><div><span class=3D"App=
le-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"dat=
a-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">mov=
</span><span class=3D"Apple-tab-span" style=3D"white-space:pre"><=
span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem=
;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">x0, x25</span></div><div><span class=3D"App=
le-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"dat=
a-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">add=
</span><span class=3D"Apple-tab-span" style=3D"white-space:pre"><=
span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem=
;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">x1, x26, #SWAPPER_DIR_SIZE + RESERVED_TTBR0=
_SIZE</span></div><div><span class=3D"Apple-tab-span" style=3D"wh=
ite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fon=
t-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz=
-span" style=3D"font-size: 0.867rem;">bl</span><span class=3D"App=
le-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"dat=
a-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">__i=
nval_cache_range</span></div><div><br></div><div><span class=3D"A=
pple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">/=
*</span></div><div><span class=3D"Apple-tab-span" style=3D"white-=
space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-si=
ze: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;"> * Clear the idmap and swapper=20=
page tables.</span></div><div><span class=3D"Apple-tab-span" styl=
e=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;"> */</span></div><div=
><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</=
span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">mov</span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">x0, x25</span></div><div=
><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</=
span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">add</span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">x6, x26, #SWAPPER_DIR_SI=
ZE + RESERVED_TTBR0_SIZE</span></div><div><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">1:</span><span clas=
s=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">stp</span><span class=3D"Apple-tab-span" style=3D"white-spac=
e:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">xzr, xzr, [x0], #16</span></div><di=
v><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	<=
/span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">stp</span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">xzr, xzr, [x0], #16</spa=
n></div><div><span class=3D"Apple-tab-span" style=3D"white-space:=
pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">stp</span><span class=3D"Apple-tab-sp=
an" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">xzr, xzr, [x=
0], #16</span></div><div><span class=3D"Apple-tab-span" style=3D"=
white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"f=
ont-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">stp</span><span class=3D"=
Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
xzr, xzr, [x0], #16</span></div><div><span class=3D"Apple-tab-spa=
n" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-sp=
an=3D"data-wiz-span" style=3D"font-size: 0.867rem;">cmp</span><sp=
an class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-=
wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span=
></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=
 0.867rem;">x0, x6</span></div><div><span class=3D"Apple-tab-span=
" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">b.lo</span><sp=
an class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-=
wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span=
></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=
 0.867rem;">1b</span></div><div><br></div><div><span class=3D"App=
le-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"dat=
a-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">ldr=
</span><span class=3D"Apple-tab-span" style=3D"white-space:pre"><=
span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem=
;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">x7, =3DSWAPPER_MM_MMUFLAGS</span></div><div=
><br></div><div><span class=3D"Apple-tab-span" style=3D"white-spa=
ce:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=
 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">/*</span></div><div><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
> * Create the identity mapping.</span></div><div><span class=3D"=
Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
 */</span></div><div><span class=3D"Apple-tab-span" style=3D"whit=
e-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">mov</span><span class=3D"Appl=
e-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span da=
ta-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">x0,=20=
x25</span><span class=3D"Apple-tab-span" style=3D"white-space:pre=
"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">				</span></span><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">// idmap_pg_dir</span></div><div><spa=
n class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span>=
</span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">adrp</span><span class=3D"Apple-tab-span" style=3D"whi=
te-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">x3, __idmap_text_start</span=
><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">		<=
/span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">// __pa(__idmap_text_start)</span></div><div><br=
></div><div><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">#ifndef CONFIG_ARM64_VA_BITS_48</span></div><div>=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">#define EXTRA_SHIFT</span><span class=3D"Apple-tab-span" styl=
e=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">(PGDIR_SHIFT + PAGE_=
SHIFT - 3)</span></div><div><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">#define EXTRA_PTRS</span><span cl=
ass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></sp=
an><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">(1 &lt;&lt; (48 - EXTRA_SHIFT))</span></div><div><br></div=
><div><span class=3D"Apple-tab-span" style=3D"white-space:pre"><s=
pan data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;=
">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"f=
ont-size: 0.867rem;">/*</span></div><div><span class=3D"Apple-tab=
-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">	</span></span><span data-wi=
z-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"> * If VA_=
BITS &lt; 48, it may be too small to allow for an ID mapping to b=
e</span></div><div><span class=3D"Apple-tab-span" style=3D"white-=
space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-si=
ze: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;"> * created that covers system R=
AM if that is located sufficiently high</span></div><div><span cl=
ass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></sp=
an><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;"> * in the physical address space. So for the ID map, use a=
n extended</span></div><div><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;"> * virtual range in that=
 case, by configuring an additional translation</span></div><div>=
<span class=3D"Apple-tab-span" style=3D"white-space:pre"><span da=
ta-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</s=
pan></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-si=
ze: 0.867rem;"> * level.</span></div><div><span class=3D"Apple-ta=
b-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz=
-span" style=3D"font-size: 0.867rem;">	</span></span><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"> * First=
, we have to verify our assumption that the current value of</spa=
n></div><div><span class=3D"Apple-tab-span" style=3D"white-space:=
pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;"> * VA_BITS was chosen such that all t=
ranslation levels are fully</span></div><div><span class=3D"Apple=
-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"> * ut=
ilised, and that lowering T0SZ will always result in an additiona=
l</span></div><div><span class=3D"Apple-tab-span" style=3D"white-=
space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-si=
ze: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;"> * translation level to be conf=
igured.</span></div><div><span class=3D"Apple-tab-span" style=3D"=
white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"f=
ont-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;"> */</span></div><div><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
#if VA_BITS !=3D EXTRA_SHIFT</span></div><div><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">#error "Mismatc=
h between VA_BITS and page size/number of translation levels"</sp=
an></div><div><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">#endif</span></div><div><br></div><div><span cl=
ass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></sp=
an><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">/*</span></div><div><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;"> * Calculate the maximum=
 allowed value for TCR_EL1.T0SZ so that the</span></div><div><spa=
n class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span>=
</span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;"> * entire ID map region can be mapped. As T0SZ =3D=3D=20=
(64 - #bits used),</span></div><div><span class=3D"Apple-tab-span=
" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;"> * this number=
 conveniently equals the number of leading zeroes in</span></div>=
<div><span class=3D"Apple-tab-span" style=3D"white-space:pre"><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;"> * the physical address of __idmap_text_end.<=
/span></div><div><span class=3D"Apple-tab-span" style=3D"white-sp=
ace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size=
: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;"> */</span></div><div><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>adrp</span><span class=3D"Apple-tab-span" style=3D"white-space:p=
re"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.8=
67rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">x5, __idmap_text_end</span></div><div>=
<span class=3D"Apple-tab-span" style=3D"white-space:pre"><span da=
ta-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</s=
pan></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-si=
ze: 0.867rem;">clz</span><span class=3D"Apple-tab-span" style=3D"=
white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"f=
ont-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">x5, x5</span></div><div><=
span class=3D"Apple-tab-span" style=3D"white-space:pre"><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</sp=
an></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">cmp</span><span class=3D"Apple-tab-span" style=3D"w=
hite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">x5, TCR_T0SZ(VA_BITS)</spa=
n><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	<=
/span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">// default T0SZ small enough?</span></div><div><=
span class=3D"Apple-tab-span" style=3D"white-space:pre"><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</sp=
an></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">b.ge</span><span class=3D"Apple-tab-span" style=3D"=
white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"f=
ont-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">1f</span><span class=3D"A=
pple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">			</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>// .. then skip additional level</span></div><div><br></div><div=
><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</=
span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">adr_l</span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">x6, idmap_t0sz</span></d=
iv><div><span class=3D"Apple-tab-span" style=3D"white-space:pre">=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">str</span><span class=3D"Apple-tab-span" s=
tyle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">x5, [x6]</span></d=
iv><div><span class=3D"Apple-tab-span" style=3D"white-space:pre">=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">dmb</span><span class=3D"Apple-tab-span" s=
tyle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">sy</span></div><di=
v><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	<=
/span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">dc</span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">ivac, x6</span><span cla=
ss=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-sp=
an=3D"data-wiz-span" style=3D"font-size: 0.867rem;">		</span></sp=
an><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">// Invalidate potentially stale cache line</span></div><di=
v><br></div><div><span class=3D"Apple-tab-span" style=3D"white-sp=
ace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size=
: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">create_table_entry x0, x3, EXTRA_=
SHIFT, EXTRA_PTRS, x5, x6</span></div><div><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">1:</span></div><di=
v><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">#endif</span></div><div><br></div><div><span class=3D"Apple=
-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">creat=
e_pgd_entry x0, x3, x5, x6</span></div><div><span class=3D"Apple-=
tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">	</span></span><span data=
-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">mov</s=
pan><span class=3D"Apple-tab-span" style=3D"white-space:pre"><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"fon=
t-size: 0.867rem;">x5, x3</span><span class=3D"Apple-tab-span" st=
yle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">				</span></span><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// __pa(__idmap=
_text_start)</span></div><div><span class=3D"Apple-tab-span" styl=
e=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">adr_l</span><span cl=
ass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></sp=
an><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">x6, __idmap_text_end</span><span class=3D"Apple-tab-span"=20=
style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">		</span></span><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// __pa(__idmap=
_text_end)</span></div><div><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">create_block_map x0, x7,=
 x3, x5, x6</span></div><div><br></div><div><span class=3D"Apple-=
tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">	</span></span><span data=
-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">/*</sp=
an></div><div><span class=3D"Apple-tab-span" style=3D"white-space=
:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;"> * Map the kernel image (starting wi=
th PHYS_OFFSET).</span></div><div><span class=3D"Apple-tab-span"=20=
style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;"> */</span></div><d=
iv><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=09=
</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">mov</span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">x0, x26</span><span clas=
s=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">				</span></s=
pan><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.8=
67rem;">// swapper_pg_dir</span></div><div><span class=3D"Apple-t=
ab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">	</span></span><span data-=
wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">ldr</sp=
an><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=09=
</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">x5, =3DKIMAGE_VADDR</span></div><div><span clas=
s=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">add</span><span class=3D"Apple-tab-span" style=3D"white-spac=
e:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">x5, x5, x23</span><span class=3D"Ap=
ple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"da=
ta-wiz-span" style=3D"font-size: 0.867rem;">			</span></span><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
// add KASLR displacement</span></div><div><span class=3D"Apple-t=
ab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">	</span></span><span data-=
wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">create_=
pgd_entry x0, x5, x3, x6</span></div><div><span class=3D"Apple-ta=
b-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz=
-span" style=3D"font-size: 0.867rem;">	</span></span><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">ldr</spa=
n><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	<=
/span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">w6, kernel_img_size</span></div><div><span class=
=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span>=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">add</span><span class=3D"Apple-tab-span" style=3D"white-space=
:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">x6, x6, x5</span></div><div><span cl=
ass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></sp=
an><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">mov</span><span class=3D"Apple-tab-span" style=3D"white-sp=
ace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size=
: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">x3, x24</span><span class=3D"Appl=
e-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">				</span></span><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">/=
/ phys offset</span></div><div><span class=3D"Apple-tab-span" sty=
le=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">create_block_map x0=
, x7, x3, x5, x6</span></div><div><br></div><div><span class=3D"A=
pple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">/=
*</span></div><div><span class=3D"Apple-tab-span" style=3D"white-=
space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-si=
ze: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;"> * Since the page tables have b=
een populated with non-cacheable</span></div><div><span class=3D"=
Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
 * accesses (MMU disabled), invalidate the idmap and swapper page=
</span></div><div><span class=3D"Apple-tab-span" style=3D"white-s=
pace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;"> * tables again to remove any sp=
eculatively loaded cache lines.</span></div><div><span class=3D"A=
pple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=20=
*/</span></div><div><span class=3D"Apple-tab-span" style=3D"white=
-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-sp=
an" style=3D"font-size: 0.867rem;">mov</span><span class=3D"Apple=
-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">x0, x=
25</span></div><div><span class=3D"Apple-tab-span" style=3D"white=
-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-sp=
an" style=3D"font-size: 0.867rem;">add</span><span class=3D"Apple=
-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">x1, x=
26, #SWAPPER_DIR_SIZE + RESERVED_TTBR0_SIZE</span></div><div><spa=
n class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span>=
</span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">dmb</span><span class=3D"Apple-tab-span" style=3D"whit=
e-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">sy</span></div><div><span cla=
ss=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-sp=
an=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></spa=
n><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">bl</span><span class=3D"Apple-tab-span" style=3D"white-spac=
e:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">__inval_cache_range</span></div><di=
v><br></div><div><span class=3D"Apple-tab-span" style=3D"white-sp=
ace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size=
: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">ret</span><span class=3D"Apple-ta=
b-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz=
-span" style=3D"font-size: 0.867rem;">	</span></span><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">x28</spa=
n></div><div><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">ENDPROC(__create_page_tables)</span></div><div><=
br></div><div><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">kernel_img_size:</span></div><div><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>.long</span><span class=3D"Apple-tab-span" style=3D"white-space:=
pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">_end - (_head - TEXT_OFFSET)</span></=
div><div><span class=3D"Apple-tab-span" style=3D"white-space:pre"=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">.ltorg</span></div><div><br></div><div><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>/*</span></div><div><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">&nbsp;* The following fragment of code is=20=
executed with the MMU enabled.</span></div><div><span data-wiz-sp=
an=3D"data-wiz-span" style=3D"font-size: 0.867rem;">&nbsp;*/</spa=
n></div><div><span class=3D"Apple-tab-span" style=3D"white-space:=
pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">.set</span><span class=3D"Apple-tab-s=
pan" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-sp=
an" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-=
span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">initial_sp,=
 init_thread_union + THREAD_START_SP</span></div><div><span data-=
wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">__mmap_=
switched:</span></div><div><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">mov</span><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>x28, lr</span><span class=3D"Apple-tab-span" style=3D"white-spac=
e:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">				</span></span><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;">// preserve LR</span></div><div>=
<span class=3D"Apple-tab-span" style=3D"white-space:pre"><span da=
ta-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</s=
pan></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-si=
ze: 0.867rem;">adr_l</span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">x8, vectors</span><span=20=
class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">			</span>=
</span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">// load VBAR_EL1 with virtual</span></div><div><span c=
lass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-=
span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></s=
pan><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.8=
67rem;">msr</span><span class=3D"Apple-tab-span" style=3D"white-s=
pace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;">vbar_el1, x8</span><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">			</span></span><=
span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem=
;">// vector table address</span></div><div><span class=3D"Apple-=
tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">	</span></span><span data=
-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">isb</s=
pan></div><div><br></div><div><span class=3D"Apple-tab-span" styl=
e=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">// Clear BSS</span><=
/div><div><span class=3D"Apple-tab-span" style=3D"white-space:pre=
"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">adr_l</span><span class=3D"Apple-tab-span"=
 style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">x0, __bss_start=
</span></div><div><span class=3D"Apple-tab-span" style=3D"white-s=
pace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;">mov</span><span class=3D"Apple-t=
ab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">	</span></span><span data-=
wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">x1, xzr=
</span></div><div><span class=3D"Apple-tab-span" style=3D"white-s=
pace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;">adr_l</span><span class=3D"Apple=
-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">x2, _=
_bss_stop</span></div><div><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">sub</span><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>x2, x2, x0</span></div><div><span class=3D"Apple-tab-span" style=
=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">bl</span><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>__pi_memset</span></div><div><span class=3D"Apple-tab-span" styl=
e=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">dsb</span><span clas=
s=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">ishst</span><span class=3D"Apple-tab-span" style=3D"white-sp=
ace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size=
: 0.867rem;">				</span></span><span data-wiz-span=3D"data-wiz-sp=
an" style=3D"font-size: 0.867rem;">// Make zero page visible to P=
TW</span></div><div><br></div><div><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">#ifdef CONFIG_RELOCATABLE<=
/span></div><div><br></div><div><span class=3D"Apple-tab-span" st=
yle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">/*</span></div><di=
v><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	<=
/span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;"> * Iterate over each entry in the relocation tab=
le, and apply the</span></div><div><span class=3D"Apple-tab-span"=
 style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;"> * relocations=20=
in place.</span></div><div><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;"> */</span></div><div><sp=
an class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-=
wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span=
></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=
 0.867rem;">adr_l</span><span class=3D"Apple-tab-span" style=3D"w=
hite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">x8, __dynsym_start</span><=
span class=3D"Apple-tab-span" style=3D"white-space:pre"><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">		</s=
pan></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-si=
ze: 0.867rem;">// start of symbol table</span></div><div><span cl=
ass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></sp=
an><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">adr_l</span><span class=3D"Apple-tab-span" style=3D"white-=
space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-si=
ze: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;">x9, __reloc_start</span><span c=
lass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-=
span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">		</span></=
span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">// start of reloc table</span></div><div><span class=3D"=
Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
adr_l</span><span class=3D"Apple-tab-span" style=3D"white-space:p=
re"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.8=
67rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">x10, __reloc_end</span><span class=3D"=
Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">		</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>// end of reloc table</span></div><div><br></div><div><span data=
-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">0:</sp=
an><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=09=
</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">cmp</span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">x9, x10</span></div><div=
><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</=
span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">b.hs</span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">2f</span></div><div><spa=
n class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span>=
</span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">ldp</span><span class=3D"Apple-tab-span" style=3D"whit=
e-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">x11, x12, [x9], #24</span></d=
iv><div><span class=3D"Apple-tab-span" style=3D"white-space:pre">=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">ldr</span><span class=3D"Apple-tab-span" s=
tyle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">x13, [x9, #-8]</sp=
an></div><div><span class=3D"Apple-tab-span" style=3D"white-space=
:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">cmp</span><span class=3D"Apple-tab-s=
pan" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-sp=
an" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-=
span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">w12, #R_AAR=
CH64_RELATIVE</span></div><div><span class=3D"Apple-tab-span" sty=
le=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">b.ne</span><span cl=
ass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></sp=
an><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">1f</span></div><div><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">add</span><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>x13, x13, x23</span><span class=3D"Apple-tab-span" style=3D"whit=
e-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">			</span></span><span data-wiz-span=3D"data-wiz=
-span" style=3D"font-size: 0.867rem;">// relocate</span></div><di=
v><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	<=
/span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">str</span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">x13, [x11, x23]</span></=
div><div><span class=3D"Apple-tab-span" style=3D"white-space:pre"=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">b</span><span class=3D"Apple-tab-span" sty=
le=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">0b</span></div><div=
><br></div><div><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">1:</span><span class=3D"Apple-tab-span" style=
=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">cmp</span><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>w12, #R_AARCH64_ABS64</span></div><div><span class=3D"Apple-tab-=
span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">b.ne</span=
><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</=
span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">0b</span></div><div><span class=3D"Apple-tab-span=
" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">add</span><spa=
n class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span>=
</span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">x12, x12, x12, lsl #1</span><span class=3D"Apple-tab-s=
pan" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-sp=
an" style=3D"font-size: 0.867rem;">		</span></span><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// symtab=20=
offset: 24x top word</span></div><div><span class=3D"Apple-tab-sp=
an" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">add</span><s=
pan class=3D"Apple-tab-span" style=3D"white-space:pre"><span data=
-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</spa=
n></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size=
: 0.867rem;">x12, x8, x12, lsr #(32 - 3)</span><span class=3D"App=
le-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"dat=
a-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">//=20=
... shifted into bottom word</span></div><div><span class=3D"Appl=
e-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span da=
ta-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">ldrs=
h</span><span class=3D"Apple-tab-span" style=3D"white-space:pre">=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">w14, [x12, #6]</span><span class=3D"Apple-=
tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">			</span></span><span da=
ta-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// E=
lf64_Sym::st_shndx</span></div><div><span class=3D"Apple-tab-span=
" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">ldr</span><spa=
n class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span>=
</span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">x15, [x12, #8]</span><span class=3D"Apple-tab-span" st=
yle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">			</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">// Elf64_Sym::st_v=
alue</span></div><div><span class=3D"Apple-tab-span" style=3D"whi=
te-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">cmp</span><span class=3D"App=
le-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"dat=
a-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">w14=
, #-0xf</span><span class=3D"Apple-tab-span" style=3D"white-space=
:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">			</span></span><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">// SHN_ABS (0xfff1) ?</span></div>=
<div><span class=3D"Apple-tab-span" style=3D"white-space:pre"><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">add</span><span class=3D"Apple-tab-span" styl=
e=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">x14, x15, x23</span>=
<span class=3D"Apple-tab-span" style=3D"white-space:pre"><span da=
ta-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">			<=
/span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">// relocate</span></div><div><span class=3D"Appl=
e-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span da=
ta-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">csel=
</span><span class=3D"Apple-tab-span" style=3D"white-space:pre"><=
span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem=
;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">x15, x14, x15, ne</span></div><div><span cl=
ass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></sp=
an><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">add</span><span class=3D"Apple-tab-span" style=3D"white-sp=
ace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size=
: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">x15, x13, x15</span></div><div><s=
pan class=3D"Apple-tab-span" style=3D"white-space:pre"><span data=
-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</spa=
n></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size=
: 0.867rem;">str</span><span class=3D"Apple-tab-span" style=3D"wh=
ite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fon=
t-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz=
-span" style=3D"font-size: 0.867rem;">x15, [x11, x23]</span></div=
><div><span class=3D"Apple-tab-span" style=3D"white-space:pre"><s=
pan data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;=
">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"f=
ont-size: 0.867rem;">b</span><span class=3D"Apple-tab-span" style=
=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">0b</span></div><div><br=
></div><div><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">2:</span><span class=3D"Apple-tab-span" style=3D"=
white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"f=
ont-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">adr_l</span><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>x8, kimage_vaddr</span><span class=3D"Apple-tab-span" style=3D"w=
hite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">		</span></span><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">// make relocated kimage_=
vaddr</span></div><div><span class=3D"Apple-tab-span" style=3D"wh=
ite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fon=
t-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz=
-span" style=3D"font-size: 0.867rem;">dc</span><span class=3D"App=
le-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"dat=
a-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">cva=
c, x8</span><span class=3D"Apple-tab-span" style=3D"white-space:p=
re"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.8=
67rem;">			</span></span><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">// value visible to secondaries</spa=
n></div><div><span class=3D"Apple-tab-span" style=3D"white-space:=
pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">dsb</span><span class=3D"Apple-tab-sp=
an" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">sy</span><sp=
an class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-=
wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">				</s=
pan></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-si=
ze: 0.867rem;">// with MMU off</span></div><div><span data-wiz-sp=
an=3D"data-wiz-span" style=3D"font-size: 0.867rem;">#endif</span>=
</div><div><br></div><div><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">adr_l</span><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>sp, initial_sp, x4</span></div><div><span class=3D"Apple-tab-spa=
n" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-sp=
an=3D"data-wiz-span" style=3D"font-size: 0.867rem;">mov</span><sp=
an class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-=
wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span=
></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=
 0.867rem;">x4, sp</span></div><div><span class=3D"Apple-tab-span=
" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">and</span><spa=
n class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span>=
</span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">x4, x4, #~(THREAD_SIZE - 1)</span></div><div><span cla=
ss=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-sp=
an=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></spa=
n><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">msr</span><span class=3D"Apple-tab-span" style=3D"white-spa=
ce:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=
 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">sp_el0, x4</span><span class=3D"Ap=
ple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"da=
ta-wiz-span" style=3D"font-size: 0.867rem;">			</span></span><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
// Save thread_info</span></div><div><span class=3D"Apple-tab-spa=
n" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-sp=
an=3D"data-wiz-span" style=3D"font-size: 0.867rem;">str_l</span><=
span class=3D"Apple-tab-span" style=3D"white-space:pre"><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</sp=
an></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">x21, __fdt_pointer, x5</span><span class=3D"Apple-t=
ab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">		</span></span><span data=
-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// Sav=
e FDT pointer</span></div><div><br></div><div><span class=3D"Appl=
e-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span da=
ta-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">ldr_=
l</span><span class=3D"Apple-tab-span" style=3D"white-space:pre">=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">x4, kimage_vaddr</span><span class=3D"Appl=
e-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">		</span></span><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">//=20=
Save the offset between</span></div><div><span class=3D"Apple-tab=
-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">	</span></span><span data-wi=
z-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">sub</span=
><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</=
span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">x4, x4, x24</span><span class=3D"Apple-tab-span"=20=
style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">			</span></span><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// the kernel=20=
virtual and</span></div><div><span class=3D"Apple-tab-span" style=
=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">str_l</span><span class=
=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span>=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">x4, kimage_voffset, x5</span><span class=3D"Apple-tab-span" s=
tyle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">		</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">// physical mappin=
gs</span></div><div><br></div><div><span class=3D"Apple-tab-span"=
 style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">mov</span><span=
 class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wi=
z-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span><=
/span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">x29, #0</span></div><div><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">#ifdef CONFIG_KASAN</span>=
</div><div><span class=3D"Apple-tab-span" style=3D"white-space:pr=
e"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">bl</span><span class=3D"Apple-tab-span"=
 style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">kasan_early_ini=
t</span></div><div><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">#endif</span></div><div><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">#ifdef CONFIG_=
RANDOMIZE_BASE</span></div><div><span class=3D"Apple-tab-span" st=
yle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">tst</span><span cl=
ass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></sp=
an><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">x23, ~(MIN_KIMG_ALIGN - 1)</span><span class=3D"Apple-tab-=
span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// already=
 running randomized?</span></div><div><span class=3D"Apple-tab-sp=
an" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">b.ne</span><=
span class=3D"Apple-tab-span" style=3D"white-space:pre"><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</sp=
an></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">0f</span></div><div><span class=3D"Apple-tab-span"=20=
style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">mov</span><span cl=
ass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></sp=
an><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">x0, x21</span><span class=3D"Apple-tab-span" style=3D"whit=
e-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">				</span></span><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">// pass FDT address in x0<=
/span></div><div><span class=3D"Apple-tab-span" style=3D"white-sp=
ace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size=
: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">mov</span><span class=3D"Apple-ta=
b-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz=
-span" style=3D"font-size: 0.867rem;">	</span></span><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">x1, x23<=
/span><span class=3D"Apple-tab-span" style=3D"white-space:pre"><s=
pan data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;=
">				</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">// pass modulo offset in x1</span></div><d=
iv><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=09=
</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">bl</span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">kaslr_early_init</span><=
span class=3D"Apple-tab-span" style=3D"white-space:pre"><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">		</s=
pan></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-si=
ze: 0.867rem;">// parse FDT for KASLR options</span></div><div><s=
pan class=3D"Apple-tab-span" style=3D"white-space:pre"><span data=
-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</spa=
n></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size=
: 0.867rem;">cbz</span><span class=3D"Apple-tab-span" style=3D"wh=
ite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fon=
t-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz=
-span" style=3D"font-size: 0.867rem;">x0, 0f</span><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">				</span></span>=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">// KASLR disabled? just proceed</span></div><div><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>orr</span><span class=3D"Apple-tab-span" style=3D"white-space:pr=
e"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">x23, x23, x0</span><span class=3D"Apple=
-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">			</span></span><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">//=20=
record KASLR offset</span></div><div><span class=3D"Apple-tab-spa=
n" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-sp=
an=3D"data-wiz-span" style=3D"font-size: 0.867rem;">ret</span><sp=
an class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-=
wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span=
></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=
 0.867rem;">x28</span><span class=3D"Apple-tab-span" style=3D"whi=
te-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">				</span></span><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">// we must enable KASLR,=20=
return</span></div><div><span class=3D"Apple-tab-span" style=3D"w=
hite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">						</span></span><span data-wiz-span=3D"da=
ta-wiz-span" style=3D"font-size: 0.867rem;">// to __enable_mmu()<=
/span></div><div><span data-wiz-span=3D"data-wiz-span" style=3D"f=
ont-size: 0.867rem;">0:</span></div><div><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">#endif</span></div><=
div><span class=3D"Apple-tab-span" style=3D"white-space:pre"><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem; b=
ackground-color: rgb(255, 0, 0);">	</span></span><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem; background-co=
lor: rgb(255, 0, 0);">b</span><span class=3D"Apple-tab-span" styl=
e=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem; background-color: rgb(255, 0, 0);">	</sp=
an></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem; background-color: rgb(255, 0, 0);">start_kernel &nbs=
p;--&gt;=CC=F8=D7=AA=B5=BDstart_kernel=A3=AC=BD=F8=C8=EB=B5=DA=C8=
=FD=BD=D7=B6=CE</span></div><div><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem; background-color: rgb(255, 0,=
 0);">ENDPROC(__mmap_switched)</span></div><div><br></div><div><s=
pan data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;=
">/*</span></div><div><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">&nbsp;* end early head section, begin h=
ead code that is also used for</span></div><div><span data-wiz-sp=
an=3D"data-wiz-span" style=3D"font-size: 0.867rem;">&nbsp;* hotpl=
ug and needs to have the same protections as the text region</spa=
n></div><div><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">&nbsp;*/</span></div><div><span class=3D"Apple-t=
ab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">	</span></span><span data-=
wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">.sectio=
n ".text","ax"</span></div><div><br></div><div><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">ENTRY(kimage_v=
addr)</span></div><div><span class=3D"Apple-tab-span" style=3D"wh=
ite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fon=
t-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz=
-span" style=3D"font-size: 0.867rem;">.quad</span><span class=3D"=
Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">		</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>_text - TEXT_OFFSET</span></div><div><br></div><div><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">/*</span=
></div><div><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">&nbsp;* If we're fortunate enough to boot at EL2,=
 ensure that the world is</span></div><div><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">&nbsp;* sane befor=
e dropping to EL1.</span></div><div><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">&nbsp;*</span></div><div>=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">&nbsp;* Returns either BOOT_CPU_MODE_EL1 or BOOT_CPU_MODE_EL2=
 in x20 if</span></div><div><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">&nbsp;* booted in EL1 or EL2 resp=
ectively.</span></div><div><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">&nbsp;*/</span></div><div><span da=
ta-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">ENTR=
Y(el2_setup)</span></div><div><span class=3D"Apple-tab-span" styl=
e=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">mrs</span><span clas=
s=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">x0, CurrentEL</span></div><div><span class=3D"Apple-tab-span=
" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">cmp</span><spa=
n class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span>=
</span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">x0, #CurrentEL_EL2</span></div><div><span class=3D"App=
le-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"dat=
a-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">b.n=
e</span><span class=3D"Apple-tab-span" style=3D"white-space:pre">=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">1f</span></div><div><span class=3D"Apple-t=
ab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">	</span></span><span data-=
wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">mrs</sp=
an><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=09=
</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">x0, sctlr_el2</span></div><div><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">CPU_BE(</spa=
n><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	<=
/span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">orr</span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">x0, x0, #(1 &lt;&lt; 25)=
</span><span class=3D"Apple-tab-span" style=3D"white-space:pre"><=
span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem=
;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">)</span><span class=3D"Apple-tab-span" styl=
e=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">// Set the EE bit fo=
r EL2</span></div><div><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">CPU_LE(</span><span class=3D"Apple-tab=
-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">	</span></span><span data-wi=
z-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">bic</span=
><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</=
span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">x0, x0, #(1 &lt;&lt; 25)</span><span class=3D"App=
le-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"dat=
a-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">)</=
span><span class=3D"Apple-tab-span" style=3D"white-space:pre"><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">// Clear the EE bit for EL2</span></div><div>=
<span class=3D"Apple-tab-span" style=3D"white-space:pre"><span da=
ta-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</s=
pan></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-si=
ze: 0.867rem;">msr</span><span class=3D"Apple-tab-span" style=3D"=
white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"f=
ont-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">sctlr_el2, x0</span></div=
><div><span class=3D"Apple-tab-span" style=3D"white-space:pre"><s=
pan data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;=
">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"f=
ont-size: 0.867rem;">b</span><span class=3D"Apple-tab-span" style=
=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">2f</span></div><div><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>1:</span><span class=3D"Apple-tab-span" style=3D"white-space:pre=
"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">mrs</span><span class=3D"Apple-tab-span" s=
tyle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">x0, sctlr_el1</spa=
n></div><div><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">CPU_BE(</span><span class=3D"Apple-tab-span" sty=
le=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">orr</span><span cla=
ss=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-sp=
an=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></spa=
n><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">x0, x0, #(3 &lt;&lt; 24)</span><span class=3D"Apple-tab-spa=
n" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-sp=
an=3D"data-wiz-span" style=3D"font-size: 0.867rem;">)</span><span=
 class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wi=
z-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span><=
/span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">// Set the EE and E0E bits for EL1</span></div><div><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>CPU_LE(</span><span class=3D"Apple-tab-span" style=3D"white-spac=
e:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">bic</span><span class=3D"Apple-tab-=
span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">x0, x0, #(=
3 &lt;&lt; 24)</span><span class=3D"Apple-tab-span" style=3D"whit=
e-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">)</span><span class=3D"Apple-=
tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">	</span></span><span data=
-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// Cle=
ar the EE and E0E bits for EL1</span></div><div><span class=3D"Ap=
ple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"da=
ta-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">ms=
r</span><span class=3D"Apple-tab-span" style=3D"white-space:pre">=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">sctlr_el1, x0</span></div><div><span class=
=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span>=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">mov</span><span class=3D"Apple-tab-span" style=3D"white-space=
:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">w20, #BOOT_CPU_MODE_EL1</span><span=20=
class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">		</span><=
/span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">// This cpu booted in EL1</span></div><div><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>isb</span></div><div><span class=3D"Apple-tab-span" style=3D"whi=
te-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">ret</span></div><div><br></d=
iv><div><span class=3D"Apple-tab-span" style=3D"white-space:pre">=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">/* Hyp configuration. */</span></div><div>=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">2:</span><span class=3D"Apple-tab-span" style=3D"white-space:=
pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">mov</span><span class=3D"Apple-tab-sp=
an" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">x0, #(1 &lt;=
&lt; 31)</span><span class=3D"Apple-tab-span" style=3D"white-spac=
e:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">			</span></span><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">// 64-bit EL1</span></div><div><s=
pan class=3D"Apple-tab-span" style=3D"white-space:pre"><span data=
-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</spa=
n></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size=
: 0.867rem;">msr</span><span class=3D"Apple-tab-span" style=3D"wh=
ite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fon=
t-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz=
-span" style=3D"font-size: 0.867rem;">hcr_el2, x0</span></div><di=
v><br></div><div><span class=3D"Apple-tab-span" style=3D"white-sp=
ace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size=
: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">/* Generic timers. */</span></div=
><div><span class=3D"Apple-tab-span" style=3D"white-space:pre"><s=
pan data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;=
">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"f=
ont-size: 0.867rem;">mrs</span><span class=3D"Apple-tab-span" sty=
le=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">x0, cnthctl_el2</sp=
an></div><div><span class=3D"Apple-tab-span" style=3D"white-space=
:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">orr</span><span class=3D"Apple-tab-s=
pan" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-sp=
an" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-=
span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">x0, x0, #3<=
/span><span class=3D"Apple-tab-span" style=3D"white-space:pre"><s=
pan data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;=
">			</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">// Enable EL1 physical timers</span></div>=
<div><span class=3D"Apple-tab-span" style=3D"white-space:pre"><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">msr</span><span class=3D"Apple-tab-span" styl=
e=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">cnthctl_el2, x0</spa=
n></div><div><span class=3D"Apple-tab-span" style=3D"white-space:=
pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">msr</span><span class=3D"Apple-tab-sp=
an" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">cntvoff_el2,=
 xzr</span><span class=3D"Apple-tab-span" style=3D"white-space:pr=
e"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">		</span></span><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">// Clear virtual offset</span></div><d=
iv><br></div><div><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">#ifdef CONFIG_ARM_GIC_V3</span></div><div><=
span class=3D"Apple-tab-span" style=3D"white-space:pre"><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</sp=
an></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">/* GICv3 system register access */</span></div><div=
><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</=
span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">mrs</span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">x0, id_aa64pfr0_el1</spa=
n></div><div><span class=3D"Apple-tab-span" style=3D"white-space:=
pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">ubfx</span><span class=3D"Apple-tab-s=
pan" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-sp=
an" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-=
span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">x0, x0, #24=
, #4</span></div><div><span class=3D"Apple-tab-span" style=3D"whi=
te-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">cmp</span><span class=3D"App=
le-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"dat=
a-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">x0,=
 #1</span></div><div><span class=3D"Apple-tab-span" style=3D"whit=
e-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">b.ne</span><span class=3D"App=
le-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"dat=
a-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">3f<=
/span></div><div><br></div><div><span class=3D"Apple-tab-span" st=
yle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">mrs_s</span><span=20=
class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></=
span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">x0, ICC_SRE_EL2</span></div><div><span class=3D"Apple-ta=
b-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz=
-span" style=3D"font-size: 0.867rem;">	</span></span><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">orr</spa=
n><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	<=
/span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">x0, x0, #ICC_SRE_EL2_SRE</span><span class=3D"Ap=
ple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"da=
ta-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">//=
 Set ICC_SRE_EL2.SRE=3D=3D1</span></div><div><span class=3D"Apple=
-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">orr</=
span><span class=3D"Apple-tab-span" style=3D"white-space:pre"><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">x0, x0, #ICC_SRE_EL2_ENABLE</span><span class=
=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span>=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">// Set ICC_SRE_EL2.Enable=3D=3D1</span></div><div><span class=
=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span>=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">msr_s</span><span class=3D"Apple-tab-span" style=3D"white-spa=
ce:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=
 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">ICC_SRE_EL2, x0</span></div><div><=
span class=3D"Apple-tab-span" style=3D"white-space:pre"><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</sp=
an></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">isb</span><span class=3D"Apple-tab-span" style=3D"w=
hite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">					</span></span><span data-wiz-span=3D"dat=
a-wiz-span" style=3D"font-size: 0.867rem;">// Make sure SRE is no=
w set</span></div><div><span class=3D"Apple-tab-span" style=3D"wh=
ite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fon=
t-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz=
-span" style=3D"font-size: 0.867rem;">mrs_s</span><span class=3D"=
Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
x0, ICC_SRE_EL2</span><span class=3D"Apple-tab-span" style=3D"whi=
te-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">			</span></span><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">// Read SRE back,</span></=
div><div><span class=3D"Apple-tab-span" style=3D"white-space:pre"=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">tbz</span><span class=3D"Apple-tab-span" s=
tyle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">x0, #0, 3f</span><=
span class=3D"Apple-tab-span" style=3D"white-space:pre"><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">			</=
span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">// and check that it sticks</span></div><div><spa=
n class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span>=
</span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">msr_s</span><span class=3D"Apple-tab-span" style=3D"wh=
ite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fon=
t-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz=
-span" style=3D"font-size: 0.867rem;">ICH_HCR_EL2, xzr</span><spa=
n class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">		</span=
></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=
 0.867rem;">// Reset ICC_HCR_EL2 to defaults</span></div><div><br=
></div><div><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">3:</span></div><div><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">#endif</span></div><div><=
br></div><div><span class=3D"Apple-tab-span" style=3D"white-space=
:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">/* Populate ID registers. */</span><=
/div><div><span class=3D"Apple-tab-span" style=3D"white-space:pre=
"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">mrs</span><span class=3D"Apple-tab-span" s=
tyle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">x0, midr_el1</span=
></div><div><span class=3D"Apple-tab-span" style=3D"white-space:p=
re"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.8=
67rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">mrs</span><span class=3D"Apple-tab-spa=
n" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-sp=
an=3D"data-wiz-span" style=3D"font-size: 0.867rem;">x1, mpidr_el1=
</span></div><div><span class=3D"Apple-tab-span" style=3D"white-s=
pace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;">msr</span><span class=3D"Apple-t=
ab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">	</span></span><span data-=
wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">vpidr_e=
l2, x0</span></div><div><span class=3D"Apple-tab-span" style=3D"w=
hite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">msr</span><span class=3D"A=
pple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">v=
mpidr_el2, x1</span></div><div><br></div><div><span class=3D"Appl=
e-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span da=
ta-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">/* s=
ctlr_el1 */</span></div><div><span class=3D"Apple-tab-span" style=
=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">mov</span><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>x0, #0x0800</span><span class=3D"Apple-tab-span" style=3D"white-=
space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-si=
ze: 0.867rem;">			</span></span><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">// Set/clear RES{1,0} bits</s=
pan></div><div><span data-wiz-span=3D"data-wiz-span" style=3D"fon=
t-size: 0.867rem;">CPU_BE(</span><span class=3D"Apple-tab-span" s=
tyle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">movk</span><span c=
lass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-=
span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></s=
pan><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.8=
67rem;">x0, #0x33d0, lsl #16</span><span class=3D"Apple-tab-span"=
 style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">)</span><span c=
lass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-=
span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></s=
pan><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.8=
67rem;">// Set EE and E0E on BE systems</span></div><div><span da=
ta-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">CPU_=
LE(</span><span class=3D"Apple-tab-span" style=3D"white-space:pre=
"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">movk</span><span class=3D"Apple-tab-span"=20=
style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">x0, #0x30d0, lsl #=
16</span><span class=3D"Apple-tab-span" style=3D"white-space:pre"=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">)</span><span class=3D"Apple-tab-span" sty=
le=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">// Clear EE and E0E=
 on LE systems</span></div><div><span class=3D"Apple-tab-span" st=
yle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">msr</span><span cl=
ass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></sp=
an><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">sctlr_el1, x0</span></div><div><br></div><div><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>/* Coprocessor traps. */</span></div><div><span class=3D"Apple-t=
ab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">	</span></span><span data-=
wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">mov</sp=
an><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=09=
</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">x0, #0x33ff</span></div><div><span class=3D"App=
le-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"dat=
a-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">msr=
</span><span class=3D"Apple-tab-span" style=3D"white-space:pre"><=
span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem=
;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">cptr_el2, x0</span><span class=3D"Apple-tab=
-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">			</span></span><span data-=
wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// Disa=
ble copro. traps to EL2</span></div><div><br></div><div><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">#ifde=
f CONFIG_COMPAT</span></div><div><span class=3D"Apple-tab-span" s=
tyle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">msr</span><span cl=
ass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></sp=
an><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">hstr_el2, xzr</span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">			</span></span><span data-wiz-span=3D"dat=
a-wiz-span" style=3D"font-size: 0.867rem;">// Disable CP15 traps=20=
to EL2</span></div><div><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">#endif</span></div><div><br></div><di=
v><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	<=
/span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">/* EL2 debug */</span></div><div><span class=3D"=
Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
mrs</span><span class=3D"Apple-tab-span" style=3D"white-space:pre=
"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">x0, id_aa64dfr0_el1</span><span class=3D"A=
pple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">		</span></span><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
// Check ID_AA64DFR0_EL1 PMUVer</span></div><div><span class=3D"A=
pple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">s=
bfx</span><span class=3D"Apple-tab-span" style=3D"white-space:pre=
"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">x0, x0, #8, #4</span></div><div><span clas=
s=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">cmp</span><span class=3D"Apple-tab-span" style=3D"white-spac=
e:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">x0, #1</span></div><div><span class=
=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span>=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">b.lt</span><span class=3D"Apple-tab-span" style=3D"white-spac=
e:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">4f</span><span class=3D"Apple-tab-s=
pan" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-sp=
an" style=3D"font-size: 0.867rem;">				</span></span><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// Skip=20=
if no PMU present</span></div><div><span class=3D"Apple-tab-span"=
 style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">mrs</span><span=
 class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wi=
z-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span><=
/span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">x0, pmcr_el0</span><span class=3D"Apple-tab-span" style=
=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">			</span></span><span data-wiz-span=3D"da=
ta-wiz-span" style=3D"font-size: 0.867rem;">// Disable debug acce=
ss traps</span></div><div><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">ubfx</span><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>x0, x0, #11, #5</span><span class=3D"Apple-tab-span" style=3D"wh=
ite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fon=
t-size: 0.867rem;">			</span></span><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">// to EL2 and allow acces=
s to</span></div><div><span class=3D"Apple-tab-span" style=3D"whi=
te-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">msr</span><span class=3D"App=
le-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"dat=
a-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">mdc=
r_el2, x0</span><span class=3D"Apple-tab-span" style=3D"white-spa=
ce:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=
 0.867rem;">			</span></span><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;">// all PMU counters from EL1</sp=
an></div><div><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">4:</span></div><div><br></div><div><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>/* Stage-2 translation */</span></div><div><span class=3D"Apple-=
tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">	</span></span><span data=
-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">msr</s=
pan><span class=3D"Apple-tab-span" style=3D"white-space:pre"><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"fon=
t-size: 0.867rem;">vttbr_el2, xzr</span></div><div><br></div><div=
><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</=
span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">/* Hypervisor stub */</span></div><div><span clas=
s=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">adrp</span><span class=3D"Apple-tab-span" style=3D"white-spa=
ce:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=
 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">x0, __hyp_stub_vectors</span></div=
><div><span class=3D"Apple-tab-span" style=3D"white-space:pre"><s=
pan data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;=
">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"f=
ont-size: 0.867rem;">add</span><span class=3D"Apple-tab-span" sty=
le=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">x0, x0, #:lo12:__hy=
p_stub_vectors</span></div><div><span class=3D"Apple-tab-span" st=
yle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">msr</span><span cl=
ass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></sp=
an><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">vbar_el2, x0</span></div><div><br></div><div><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>/* spsr */</span></div><div><span class=3D"Apple-tab-span" style=
=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">mov</span><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>x0, #(PSR_F_BIT | PSR_I_BIT | PSR_A_BIT | PSR_D_BIT |\</span></d=
iv><div><span class=3D"Apple-tab-span" style=3D"white-space:pre">=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">		</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;"> &nbsp; &nbsp; &nbsp;PSR_MODE_EL1h)</span>=
</div><div><span class=3D"Apple-tab-span" style=3D"white-space:pr=
e"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">msr</span><span class=3D"Apple-tab-span=
" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">spsr_el2, x0</=
span></div><div><span class=3D"Apple-tab-span" style=3D"white-spa=
ce:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=
 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">msr</span><span class=3D"Apple-tab=
-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">	</span></span><span data-wi=
z-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">elr_el2,=20=
lr</span></div><div><span class=3D"Apple-tab-span" style=3D"white=
-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-sp=
an" style=3D"font-size: 0.867rem;">mov</span><span class=3D"Apple=
-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">w20,=20=
#BOOT_CPU_MODE_EL2</span><span class=3D"Apple-tab-span" style=3D"=
white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"f=
ont-size: 0.867rem;">		</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">// This CPU booted in EL=
2</span></div><div><span class=3D"Apple-tab-span" style=3D"white-=
space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-si=
ze: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;">eret</span></div><div><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">ENDPR=
OC(el2_setup)</span></div><div><br></div><div><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">/*</span></div>=
<div><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">&nbsp;* Sets the __boot_cpu_mode flag depending on the C=
PU boot mode passed</span></div><div><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">&nbsp;* in x20. See arch=
/arm64/include/asm/virt.h for more info.</span></div><div><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">&nb=
sp;*/</span></div><div><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">ENTRY(set_cpu_boot_mode_flag)</span></=
div><div><span class=3D"Apple-tab-span" style=3D"white-space:pre"=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">adr_l</span><span class=3D"Apple-tab-span"=
 style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">x1, __boot_cpu_=
mode</span></div><div><span class=3D"Apple-tab-span" style=3D"whi=
te-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">cmp</span><span class=3D"App=
le-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"dat=
a-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">w20=
, #BOOT_CPU_MODE_EL2</span></div><div><span class=3D"Apple-tab-sp=
an" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">b.ne</span><=
span class=3D"Apple-tab-span" style=3D"white-space:pre"><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</sp=
an></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">1f</span></div><div><span class=3D"Apple-tab-span"=20=
style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">add</span><span cl=
ass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></sp=
an><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">x1, x1, #4</span></div><div><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">1:</span><span class=3D"Ap=
ple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"da=
ta-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">st=
r</span><span class=3D"Apple-tab-span" style=3D"white-space:pre">=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">w20, [x1]</span><span class=3D"Apple-tab-s=
pan" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-sp=
an" style=3D"font-size: 0.867rem;">			</span></span><span data-wi=
z-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// This C=
PU has booted in EL1</span></div><div><span class=3D"Apple-tab-sp=
an" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">dmb</span><s=
pan class=3D"Apple-tab-span" style=3D"white-space:pre"><span data=
-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</spa=
n></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size=
: 0.867rem;">sy</span></div><div><span class=3D"Apple-tab-span" s=
tyle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">dc</span><span cla=
ss=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-sp=
an=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></spa=
n><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">ivac, x1</span><span class=3D"Apple-tab-span" style=3D"whit=
e-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">			</span></span><span data-wiz-span=3D"data-wiz=
-span" style=3D"font-size: 0.867rem;">// Invalidate potentially s=
tale cache line</span></div><div><span class=3D"Apple-tab-span" s=
tyle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">ret</span></div><d=
iv><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">ENDPROC(set_cpu_boot_mode_flag)</span></div><div><br></div=
><div><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">/*</span></div><div><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;">&nbsp;* We need to find out the=
 CPU boot mode long after boot, so we need to</span></div><div><s=
pan data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;=
">&nbsp;* store it in a writable variable.</span></div><div><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">&=
nbsp;*</span></div><div><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">&nbsp;* This is not in .bss, because=20=
we set it sufficiently early that the boot-time</span></div><div>=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">&nbsp;* zeroing of .bss would clobber it.</span></div><div><s=
pan data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;=
">&nbsp;*/</span></div><div><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">.pushsection</span><span=
 class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wi=
z-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span><=
/span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">.data..cacheline_aligned</span></div><div><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>.align</span><span class=3D"Apple-tab-span" style=3D"white-space=
:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">L1_CACHE_SHIFT</span></div><div><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
ENTRY(__boot_cpu_mode)</span></div><div><span class=3D"Apple-tab-=
span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">.long</spa=
n><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	<=
/span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">BOOT_CPU_MODE_EL2</span></div><div><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>.long</span><span class=3D"Apple-tab-span" style=3D"white-space:=
pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">BOOT_CPU_MODE_EL1</span></div><div><s=
pan class=3D"Apple-tab-span" style=3D"white-space:pre"><span data=
-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</spa=
n></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size=
: 0.867rem;">.popsection</span></div><div><br></div><div><span cl=
ass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></sp=
an><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">/*</span></div><div><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;"> * This provides a "hold=
ing pen" for platforms to hold all secondary</span></div><div><sp=
an class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-=
wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span=
></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=
 0.867rem;"> * cores are held until we're ready for them to initi=
alise.</span></div><div><span class=3D"Apple-tab-span" style=3D"w=
hite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;"> */</span></div><div><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">E=
NTRY(secondary_holding_pen)</span></div><div><span class=3D"Apple=
-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">bl</s=
pan><span class=3D"Apple-tab-span" style=3D"white-space:pre"><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"fon=
t-size: 0.867rem;">el2_setup</span><span class=3D"Apple-tab-span"=
 style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">			</span></span><span data-wiz-sp=
an=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// Drop to EL=
1, w20=3Dcpu_boot_mode</span></div><div><span class=3D"Apple-tab-=
span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">bl</span><=
span class=3D"Apple-tab-span" style=3D"white-space:pre"><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</sp=
an></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">set_cpu_boot_mode_flag</span></div><div><span class=
=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span>=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">mrs</span><span class=3D"Apple-tab-span" style=3D"white-space=
:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">x0, mpidr_el1</span></div><div><span=
 class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wi=
z-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span><=
/span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">ldr &nbsp; &nbsp; x1, =3DMPIDR_HWID_BITMASK</span></div=
><div><span class=3D"Apple-tab-span" style=3D"white-space:pre"><s=
pan data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;=
">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"f=
ont-size: 0.867rem;">and</span><span class=3D"Apple-tab-span" sty=
le=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">x0, x0, x1</span></=
div><div><span class=3D"Apple-tab-span" style=3D"white-space:pre"=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">adr_l</span><span class=3D"Apple-tab-span"=
 style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">x3, secondary_h=
olding_pen_release</span></div><div><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">pen:</span><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>ldr</span><span class=3D"Apple-tab-span" style=3D"white-space:pr=
e"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">x4, [x3]</span></div><div><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>cmp</span><span class=3D"Apple-tab-span" style=3D"white-space:pr=
e"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">x4, x0</span></div><div><span class=3D"=
Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
b.eq</span><span class=3D"Apple-tab-span" style=3D"white-space:pr=
e"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">secondary_startup</span></div><div><spa=
n class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span>=
</span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">wfe</span></div><div><span class=3D"Apple-tab-span" st=
yle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">b</span><span clas=
s=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">pen</span></div><div><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">ENDPROC(secondary_holding_pen)</spa=
n></div><div><br></div><div><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">/*</span></div><div><spa=
n class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span>=
</span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;"> * Secondary entry point that jumps straight into the=20=
kernel. Only to</span></div><div><span class=3D"Apple-tab-span" s=
tyle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;"> * be used where C=
PUs are brought online dynamically by the kernel.</span></div><di=
v><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	<=
/span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;"> */</span></div><div><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">ENTRY(secondary_entry)<=
/span></div><div><span class=3D"Apple-tab-span" style=3D"white-sp=
ace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size=
: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">bl</span><span class=3D"Apple-tab=
-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">	</span></span><span data-wi=
z-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">el2_setup=
</span><span class=3D"Apple-tab-span" style=3D"white-space:pre"><=
span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem=
;">			</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">// Drop to EL1</span></div><div><span clas=
s=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">bl</span><span class=3D"Apple-tab-span" style=3D"white-space=
:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">set_cpu_boot_mode_flag</span></div><=
div><span class=3D"Apple-tab-span" style=3D"white-space:pre"><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"fon=
t-size: 0.867rem;">b</span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">secondary_startup</span>=
</div><div><span data-wiz-span=3D"data-wiz-span" style=3D"font-si=
ze: 0.867rem;">ENDPROC(secondary_entry)</span></div><div><br></di=
v><div><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">ENTRY(secondary_startup)</span></div><div><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>/*</span></div><div><span class=3D"Apple-tab-span" style=3D"whit=
e-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;"> * Common entry point for sec=
ondary CPUs.</span></div><div><span class=3D"Apple-tab-span" styl=
e=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;"> */</span></div><div=
><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</=
span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">adrp</span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">x25, idmap_pg_dir</span>=
</div><div><span class=3D"Apple-tab-span" style=3D"white-space:pr=
e"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">adrp</span><span class=3D"Apple-tab-spa=
n" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-sp=
an=3D"data-wiz-span" style=3D"font-size: 0.867rem;">x26, swapper_=
pg_dir</span></div><div><span class=3D"Apple-tab-span" style=3D"w=
hite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">bl</span><span class=3D"Ap=
ple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"da=
ta-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">__=
cpu_setup</span><span class=3D"Apple-tab-span" style=3D"white-spa=
ce:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=
 0.867rem;">			</span></span><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;">// initialise processor</span></=
div><div><br></div><div><span class=3D"Apple-tab-span" style=3D"w=
hite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">ldr</span><span class=3D"A=
pple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">x=
8, kimage_vaddr</span></div><div><span class=3D"Apple-tab-span" s=
tyle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">ldr</span><span cl=
ass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></sp=
an><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">w9, 0f</span></div><div><span class=3D"Apple-tab-span" sty=
le=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">sub</span><span cla=
ss=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-sp=
an=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></spa=
n><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">x27, x8, w9, sxtw</span><span class=3D"Apple-tab-span" styl=
e=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">		</span></span><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">// address to jump=20=
to after enabling the MMU</span></div><div><span class=3D"Apple-t=
ab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">	</span></span><span data-=
wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">b</span=
><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</=
span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">__enable_mmu</span></div><div><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">ENDPROC(seconda=
ry_startup)</span></div><div><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;">0:</span><span class=3D"Apple-ta=
b-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz=
-span" style=3D"font-size: 0.867rem;">	</span></span><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">.long</s=
pan><span class=3D"Apple-tab-span" style=3D"white-space:pre"><spa=
n data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=
	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"fon=
t-size: 0.867rem;">(_text - TEXT_OFFSET) - __secondary_switched</=
span></div><div><br></div><div><span data-wiz-span=3D"data-wiz-sp=
an" style=3D"font-size: 0.867rem;">ENTRY(__secondary_switched)</s=
pan></div><div><span class=3D"Apple-tab-span" style=3D"white-spac=
e:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">adr_l</span><span class=3D"Apple-ta=
b-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz=
-span" style=3D"font-size: 0.867rem;">	</span></span><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">x5, vect=
ors</span></div><div><span class=3D"Apple-tab-span" style=3D"whit=
e-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">msr</span><span class=3D"Appl=
e-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span da=
ta-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">vbar=
_el1, x5</span></div><div><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">isb</span></div><div><br=
></div><div><span class=3D"Apple-tab-span" style=3D"white-space:p=
re"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.8=
67rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">ldr_l</span><span class=3D"Apple-tab-s=
pan" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-sp=
an" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-=
span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">x0, seconda=
ry_data</span><span class=3D"Apple-tab-span" style=3D"white-space=
:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0=
.867rem;">		</span></span><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">// get secondary_data.stack</span><=
/div><div><span class=3D"Apple-tab-span" style=3D"white-space:pre=
"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">mov</span><span class=3D"Apple-tab-span" s=
tyle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">sp, x0</span></div=
><div><span class=3D"Apple-tab-span" style=3D"white-space:pre"><s=
pan data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;=
">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"f=
ont-size: 0.867rem;">and</span><span class=3D"Apple-tab-span" sty=
le=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;">x0, x0, #~(THREAD_S=
IZE - 1)</span></div><div><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">msr</span><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>sp_el0, x0</span><span class=3D"Apple-tab-span" style=3D"white-s=
pace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">			</span></span><span data-wiz-span=3D"data-wiz-sp=
an" style=3D"font-size: 0.867rem;">// save thread_info</span></di=
v><div><span class=3D"Apple-tab-span" style=3D"white-space:pre"><=
span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem=
;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">mov</span><span class=3D"Apple-tab-span" st=
yle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">x29, #0</span></di=
v><div><span class=3D"Apple-tab-span" style=3D"white-space:pre"><=
span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem=
;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">b</span><span class=3D"Apple-tab-span" styl=
e=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">secondary_start_kern=
el</span></div><div><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">ENDPROC(__secondary_switched)</span></div>=
<div><br></div><div><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">/*</span></div><div><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">&nbsp;* Enable the=
 MMU.</span></div><div><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">&nbsp;*</span></div><div><span data-wi=
z-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">&nbsp;* &=
nbsp;x0 &nbsp;=3D SCTLR_EL1 value for turning on the MMU.</span><=
/div><div><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">&nbsp;* &nbsp;x27 =3D *virtual* address to jump to=20=
upon completion</span></div><div><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">&nbsp;*</span></div><div><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>&nbsp;* Other registers depend on the function called upon compl=
etion.</span></div><div><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">&nbsp;*</span></div><div><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">&nbsp;*=20=
Checks if the selected granule size is supported by the CPU.</spa=
n></div><div><span data-wiz-span=3D"data-wiz-span" style=3D"font-=
size: 0.867rem;">&nbsp;* If it isn't, park the CPU</span></div><d=
iv><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">&nbsp;*/</span></div><div><span class=3D"Apple-tab-span" s=
tyle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">.section</span><sp=
an class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-=
wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span=
></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=
 0.867rem;">".idmap.text", "ax"</span></div><div><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">__enable_mmu=
:</span></div><div><span class=3D"Apple-tab-span" style=3D"white-=
space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-si=
ze: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;">mrs</span><span class=3D"Apple-=
tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">	</span></span><span data=
-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">x18, s=
ctlr_el1</span><span class=3D"Apple-tab-span" style=3D"white-spac=
e:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">			</span></span><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">// preserve old SCTLR_EL1 value</=
span></div><div><span class=3D"Apple-tab-span" style=3D"white-spa=
ce:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=
 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">mrs</span><span class=3D"Apple-tab=
-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">	</span></span><span data-wi=
z-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">x1, ID_AA=
64MMFR0_EL1</span></div><div><span class=3D"Apple-tab-span" style=
=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">ubfx</span><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>x2, x1, #ID_AA64MMFR0_TGRAN_SHIFT, 4</span></div><div><span clas=
s=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">cmp</span><span class=3D"Apple-tab-span" style=3D"white-spac=
e:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">x2, #ID_AA64MMFR0_TGRAN_SUPPORTED</=
span></div><div><span class=3D"Apple-tab-span" style=3D"white-spa=
ce:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=
 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">b.ne</span><span class=3D"Apple-ta=
b-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz=
-span" style=3D"font-size: 0.867rem;">	</span></span><span data-w=
iz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">__no_gra=
nule_support</span></div><div><span class=3D"Apple-tab-span" styl=
e=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">msr</span><span clas=
s=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">ttbr0_el1, x25</span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">			</span></span><span data-wiz-span=3D"dat=
a-wiz-span" style=3D"font-size: 0.867rem;">// load TTBR0</span></=
div><div><span class=3D"Apple-tab-span" style=3D"white-space:pre"=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">msr</span><span class=3D"Apple-tab-span" s=
tyle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">ttbr1_el1, x26</sp=
an><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=09=
		</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">// load TTBR1</span></div><div><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>isb</span></div><div><span class=3D"Apple-tab-span" style=3D"whi=
te-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">msr</span><span class=3D"App=
le-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"dat=
a-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">sct=
lr_el1, x0</span></div><div><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">isb</span></div><div><sp=
an class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-=
wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span=
></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=
 0.867rem;">/*</span></div><div><span class=3D"Apple-tab-span" st=
yle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;"> * Invalidate the=20=
local I-cache so that any instructions fetched</span></div><div><=
span class=3D"Apple-tab-span" style=3D"white-space:pre"><span dat=
a-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</sp=
an></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;"> * speculatively from the PoC are discarded, since=20=
they may have</span></div><div><span class=3D"Apple-tab-span" sty=
le=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" styl=
e=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"=
data-wiz-span" style=3D"font-size: 0.867rem;"> * been dynamically=
 patched at the PoU.</span></div><div><span class=3D"Apple-tab-sp=
an" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;"> */</span></=
div><div><span class=3D"Apple-tab-span" style=3D"white-space:pre"=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">ic</span><span class=3D"Apple-tab-span" st=
yle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">iallu</span></div>=
<div><span class=3D"Apple-tab-span" style=3D"white-space:pre"><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">dsb</span><span class=3D"Apple-tab-span" styl=
e=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"d=
ata-wiz-span" style=3D"font-size: 0.867rem;">nsh</span></div><div=
><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</=
span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">isb</span></div><div><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">#ifdef CONFIG_RANDOMIZE_=
BASE</span></div><div><span class=3D"Apple-tab-span" style=3D"whi=
te-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-=
span" style=3D"font-size: 0.867rem;">mov</span><span class=3D"App=
le-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"dat=
a-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">x19=
, x0</span><span class=3D"Apple-tab-span" style=3D"white-space:pr=
e"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">				</span></span><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">// preserve new SCTLR_EL1 value</spa=
n></div><div><span class=3D"Apple-tab-span" style=3D"white-space:=
pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">blr</span><span class=3D"Apple-tab-sp=
an" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-spa=
n" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-s=
pan=3D"data-wiz-span" style=3D"font-size: 0.867rem;">x27</span></=
div><div><br></div><div><span class=3D"Apple-tab-span" style=3D"w=
hite-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"fo=
nt-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">/*</span></div><div><span=20=
class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></=
span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.=
867rem;"> * If we return here, we have a KASLR displacement in x2=
3 which we need</span></div><div><span class=3D"Apple-tab-span" s=
tyle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;"> * to take into ac=
count by discarding the current kernel mapping and</span></div><d=
iv><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=09=
</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;"> * creating a new one.</span></div><div><span c=
lass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-=
span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></s=
pan><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.8=
67rem;"> */</span></div><div><span class=3D"Apple-tab-span" style=
=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data=
-wiz-span" style=3D"font-size: 0.867rem;">msr</span><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><sp=
an data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;"=
>sctlr_el1, x18</span><span class=3D"Apple-tab-span" style=3D"whi=
te-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">			</span></span><span data-wiz-span=3D"data-wi=
z-span" style=3D"font-size: 0.867rem;">// disable the MMU</span><=
/div><div><span class=3D"Apple-tab-span" style=3D"white-space:pre=
"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">isb</span></div><div><span class=3D"Apple-=
tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">	</span></span><span data=
-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">bl</sp=
an><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span=
 data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">=09=
</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font=
-size: 0.867rem;">__create_page_tables</span><span class=3D"Apple=
-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">		</span></span><span da=
ta-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">// r=
ecreate kernel mapping</span></div><div><br></div><div><span clas=
s=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></span=
><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867r=
em;">tlbi</span><span class=3D"Apple-tab-span" style=3D"white-spa=
ce:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=
 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">vmalle1</span><span class=3D"Apple=
-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">				</span></span><span=20=
data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">//=
 Remove any stale TLB entries</span></div><div><span class=3D"App=
le-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"dat=
a-wiz-span" style=3D"font-size: 0.867rem;">	</span></span><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">dsb=
</span><span class=3D"Apple-tab-span" style=3D"white-space:pre"><=
span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem=
;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">nsh</span></div><div><br></div><div><span c=
lass=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-=
span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></s=
pan><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.8=
67rem;">msr</span><span class=3D"Apple-tab-span" style=3D"white-s=
pace:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-siz=
e: 0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span=
" style=3D"font-size: 0.867rem;">sctlr_el1, x19</span><span class=
=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=
=3D"data-wiz-span" style=3D"font-size: 0.867rem;">			</span></spa=
n><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">// re-enable the MMU</span></div><div><span class=3D"Apple-=
tab-span" style=3D"white-space:pre"><span data-wiz-span=3D"data-w=
iz-span" style=3D"font-size: 0.867rem;">	</span></span><span data=
-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">isb</s=
pan></div><div><span class=3D"Apple-tab-span" style=3D"white-spac=
e:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=20=
0.867rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" s=
tyle=3D"font-size: 0.867rem;">ic</span><span class=3D"Apple-tab-s=
pan" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-sp=
an" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-=
span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">iallu</span=
><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">		=09=
	</span></span><span data-wiz-span=3D"data-wiz-span" style=3D"fon=
t-size: 0.867rem;">// flush instructions fetched</span></div><div=
><span class=3D"Apple-tab-span" style=3D"white-space:pre"><span d=
ata-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</=
span></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-s=
ize: 0.867rem;">dsb</span><span class=3D"Apple-tab-span" style=3D=
"white-space:pre"><span data-wiz-span=3D"data-wiz-span" style=3D"=
font-size: 0.867rem;">	</span></span><span data-wiz-span=3D"data-=
wiz-span" style=3D"font-size: 0.867rem;">nsh</span><span class=3D=
"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">				</span></span>=
<span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867re=
m;">// via old mapping</span></div><div><span class=3D"Apple-tab-=
span" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-s=
pan" style=3D"font-size: 0.867rem;">	</span></span><span data-wiz=
-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">isb</span>=
</div><div><span class=3D"Apple-tab-span" style=3D"white-space:pr=
e"><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.86=
7rem;">	</span></span><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">add</span><span class=3D"Apple-tab-span=
" style=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span"=
 style=3D"font-size: 0.867rem;">	</span></span><span data-wiz-spa=
n=3D"data-wiz-span" style=3D"font-size: 0.867rem;">x27, x27, x23<=
/span><span class=3D"Apple-tab-span" style=3D"white-space:pre"><s=
pan data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;=
">			</span></span><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">// relocated __mmap_switched</span></div><=
div><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.8=
67rem;">#endif</span></div><div><span class=3D"Apple-tab-span" st=
yle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" sty=
le=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">br</span><span cla=
ss=3D"Apple-tab-span" style=3D"white-space:pre"><span data-wiz-sp=
an=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span></spa=
n><span data-wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867=
rem;">x27</span></div><div><span data-wiz-span=3D"data-wiz-span"=20=
style=3D"font-size: 0.867rem;">ENDPROC(__enable_mmu)</span></div>=
<div><br></div><div><span data-wiz-span=3D"data-wiz-span" style=3D=
"font-size: 0.867rem;">__no_granule_support:</span></div><div><sp=
an class=3D"Apple-tab-span" style=3D"white-space:pre"><span data-=
wiz-span=3D"data-wiz-span" style=3D"font-size: 0.867rem;">	</span=
></span><span data-wiz-span=3D"data-wiz-span" style=3D"font-size:=
 0.867rem;">wfe</span></div><div><span class=3D"Apple-tab-span" s=
tyle=3D"white-space:pre"><span data-wiz-span=3D"data-wiz-span" st=
yle=3D"font-size: 0.867rem;">	</span></span><span data-wiz-span=3D=
"data-wiz-span" style=3D"font-size: 0.867rem;">b __no_granule_sup=
port</span></div><div><span data-wiz-span=3D"data-wiz-span" style=
=3D"font-size: 0.867rem;">ENDPROC(__no_granule_support)</span></d=
iv><div><br></div></div></body></html>

------=_Next_Part_0138494593.370--

------=_Next_Part_0415483779.729--

